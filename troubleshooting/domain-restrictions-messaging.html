---
title: Nachrichten zu Domäneneinschränkungen
parent: Troubleshooting
description: In this topic, you will learn how to display appropriate error messages when a video is not allowed to play because of domain restrictions. By default, Brightcove Player does not inform the user that a video is domain restricted.
---

<article class="bcls-article">
  <h1>Domain Restrictions Messaging</h1>
  <summary>{{ page.description }}</summary>
  <section class="bcls-section">
    <h2 id="Overview">Überblick</h2>
    <p>Es ist möglich einzuschränken, wo ein Video über Domain-Einschränkungen angezeigt werden kann. Das <a href="https://studio.support.brightcove.com/players/configuring-player-content-restrictions.html">Konfigurieren von Einschränkungen für Player-Inhalte</a> Das Dokument zeigt Ihnen, wie Sie mit Video Cloud Domäneneinschränkungen anwenden. In dem Dokument, das Sie gerade lesen, erfahren Sie, wie Sie Code implementieren, um Benutzer darüber zu informieren, dass der Player Domänenbeschränkungen verwendet.</p>
    <p>Standardmäßig informiert Brightcove Player den Benutzer nicht darüber, dass sich ein Video, das er anzeigen möchte, in einem Player mit Domänenbeschränkung befindet. Der Player zeigt einfach einen schwarzen Bildschirm an. Wenn Sie die Konsole anzeigen, wird Folgendes angezeigt.</p>
    <figure class="bcls-figure"><img class="bcls-image" alt="domain restriction console error" src="/assets/images/troubleshooting/domain-restrictions-error-console.png" /></figure>
    <p>Dies ist nicht besonders hilfreich, aber wenn Sie die überprüfen <strong>Netzwerk</strong> Tab und klicken Sie auf a <strong>Name</strong> Das entspricht Ihrer Video-ID. Überprüfen Sie dann die <strong>Vorschau</strong> Auf der Registerkarte sehen Sie einen aufschlussreicheren Fehler.</p>
    <figure class="bcls-figure"><img class="bcls-image" alt="domain message console network tab" src="/assets/images/troubleshooting/domain-restrictions-error-network.png" /></figure>
    <p>In diesem Dokument wird eine Strategie implementiert, mit der der Benutzer wissen soll, dass das Video, das er ansehen möchte, domänenbeschränkt ist.</p>
  </section>
  <section class="bcls-section">
    <h2 id="errorobject">Fehlerobjekt des Spielerkatalogs</h2>
    <p>Der Schlüssel zum Erstellen einer benutzerfreundlichen Nachricht ist der <code translate="No">error</code> Objekt in Brightcove Player enthalten <code translate="No">catalog</code>. Ein Beispiel für einen Fehler bei der Domäneneinschränkung ist unten in einem Screenshot von der Browserkonsole dargestellt. Beachten Sie, dass das Objekt a enthält <code translate="No">data</code> Eigenschaft, die selbst ein Array enthält. Das Array enthält den letzten Fehler, den der Katalog beim Laden eines Videos festgestellt hat. In dem Beispiel sehen Sie, dass das Element im Array ein Problem mit Domäneneinschränkungen meldet.</p>
    <figure class="bcls-figure"><img class="bcls-image" alt="catalog error object" src="/assets/images/troubleshooting/domain-restrictions-catalog-error.png" /></figure>
  </section>
  <section class="bcls-section">
    <h2 id="bccatalogerror">Behandle bc-catalog-error</h2>
    <p>Es ist möglich, dass die Handhabung von Fehlern im normalen <code translate="No">ready()</code> Abschnitt im <code translate="No">script</code> Block Probleme verursachen kann. Zum Beispiel kann es vorkommen, dass das <code translate="No">bc-catalog-error</code> Ereignis ausgelöst werden könnte, bevor der Spieler bereit ist, und wenn Sie auf den Fehler im <code translate="No">ready()</code> Abschnitt hören, Sie können den Fehler nicht behandeln. Möglicherweise stellen Sie fest, dass Ihr Code kein Problem enthält, aber das Problem kann vom Browser abhängig sein, also seien Sie vorsichtig. Aus diesem Grund verwendet der Fehlerbehandlungscode in diesem Dokument das <code translate="No">one()</code> Ereignisbehandlungsmethode zum Abhören der <code translate="No">bc-catalog-error</code> in einem separaten Codeblock anstatt innerhalb der <code translate="No">ready()</code> Sektion.</p>
  </section>
  <section class="bcls-section">
    <h2 id="htmlmessage">Nachricht in HTML</h2>
    <p>Sobald Sie die Struktur des erzeugten Fehlers und dessen Position verstanden haben, können Sie mit JavaScript einen beschreibenden Fehler für den Benutzer anzeigen. Die grundlegenden Implementierungsschritte sind:</p>
    <ul>
      <li>Erstellen Sie ein Zielelement, in dem die Nachricht angezeigt werden soll.</li>
      <li>Stellen Sie sicher, dass der Spieler bereit ist, darauf zu reagieren.</li>
      <li>Überprüfen Sie, ob ein Fehler aufgetreten ist.</li>
      <li>Wenn ja, überprüfen Sie, ob es sich bei dem Fehler um ein Problem mit Domäneneinschränkungen handelt.</li>
      <li>Wenn ja, zeigen Sie dem Benutzer eine Nachricht an.</li>
    </ul>
    <p>Der folgende Code implementiert diese Schritte.</p>
    <ul>
      <li>Zeile 8: Fügen Sie ein HTML-Element ein, in diesem Fall einen Absatz, in den Text eingefügt werden soll. Geben Sie dem Element eine <code translate="No">id</code> für Targeting-Zwecke.</li>
      <li>Zeile 13: Verwenden Sie die <code translate="No">one()</code> Methode fügen Sie einen Ereignis-Listener für das <code translate="No">bc-catalog-error</code> Ereignis nur einmal hinzu.</li>
      <li>Zeile 16: Benutze ein <code translate="No">if</code> Anweisung, um sicherzugehen, dass ein Fehler aufgetreten ist.</li>
      <li>Zeile 17: Weisen Sie einer Variablen die spezifischen Fehlerinformationen aus dem Fehlerobjekt des Brightcove Player-Katalogs zu.</li>
      <li>Zeile 18: Benutze ein <code translate="No">if</code> Anweisung, um sicherzustellen, dass die spezifischen Fehlerinformationen vorhanden sind UND die Art des Fehlers von einer Domäneneinschränkung herrührt.</li>
      <li>Zeile 19: Fügen Sie eine entsprechende Textnachricht in das in Zeile 12 erstellte HTML-Element ein.</li>
    </ul>
    <pre class="line-numbers">
<code class="language-html" translate="No">  &lt;video-js id="myPlayerID"
    data-video-id="3495887198001"
    data-account="1507807800001"
    data-player="4c8eb732-ba76-485c-a906-407365721633"
    data-embed="default"
    class="video-js" controls&gt;&lt;/video-js&gt;

    <span class="bcls-highlight">&lt;p id="textTarget"&gt;&lt;/p&gt;</span>

  &lt;script src="https://players.brightcove.net/1507807800001/4c8eb732-ba76-485c-a906-407365721633_default/index.min.js"&gt;&lt;/script&gt;

  &lt;script type="text/javascript"&gt;
    videojs.getPlayer('myPlayerID').<span class="bcls-highlight">one('bc-catalog-error', function(){</span>
      var myPlayer = this,
        specificError;
      <span class="bcls-highlight">if (myPlayer.catalog.error !== undefined) {
        specificError = myPlayer.catalog.error.data[0];
        if (specificError !== undefined &amp; specificError.error_subcode == "DOMAIN") {
          document.getElementById("textTarget").innerHTML = "The video you are trying to watch cannot be viewed as it is domain restricted.";
        };
      };</span>
    });

    videojs.getPlayer('myPlayerID').ready(function() {
      var myPlayer = this;
      console.log('in ready');
    });
  &lt;/script&gt;</code></pre>
    <p>Der folgende Screenshot zeigt die Meldung, die unter dem Player angezeigt wird.</p>
    <figure class="bcls-figure"><img class="bcls-image" alt="error below player" src="/assets/images/troubleshooting/domain-restrictions-html-message.png" /></figure>
  </section>
  <section class="bcls-section">
    <h2 id="errorplugin">Nachricht über Fehler-Plugin</h2>
    <p>Möglicherweise möchten Sie, dass die Nachricht im Player angezeigt wird, wenn das Video domänenbeschränkt ist. Sie können dies mit dem Fehler-Plugin tun. Das Fehler-Plugin wird automatisch in den Player geladen, sodass Sie diesen Vorgang nicht explizit ausführen müssen. Einzelheiten zum Fehler-Plugin, das über das hier Erwähnte hinausgeht, finden Sie in der <a href="/plugins/display-error-messages-plugin.html">Plugin für Fehlermeldungen anzeigen</a> Dokument.</p>
    <ul>
      <li>Zeile 43: Verwenden Sie die <code translate="No">one()</code> Methode fügen Sie einen Ereignis-Listener für das <code translate="No">bc-catalog-error</code> Ereignis nur einmal hinzu.</li>
      <li>Zeilen 46-53: Rufen Sie den Spieler an <code translate="No">error()</code> Methode, die als JSON-Argument übergeben wird, das das definiert <code translate="No">errors</code> anzuzeigende Informationen. Beachten Sie, dass die Wahl von <code translate="No">-3</code> Der Fehlercode ist willkürlich und die einzige Anleitung besteht darin, keinen Standardfehlercode (derzeit 1-5) zu verwenden.</li>
      <li>Zeile 57: Ruf den <code translate="No">error()</code> Methode zum Anzeigen der benutzerdefinierten Fehlerinformationen. Die Logik, die verwendet wird, um zu bestimmen, wann der Domäneneinschränkungsfehler aufgetreten ist, ist dieselbe wie oben. Das als Argument übergebene Objekt definiert, welche Fehlermeldung angezeigt werden soll.</li>
    </ul>
    <pre class="line-numbers" data-start="42">
<code class="language-html" translate="No">  &lt;script type="text/javascript"&gt;
    videojs.getPlayer('myPlayerID').<span class="bcls-highlight">one('bc-catalog-error', function(){</span>
      var myPlayer = this,
        specificError;
      <span class="bcls-highlight">myPlayer.errors({
        'errors': {
          '-3': {
            'headline': 'The video you are trying to watch cannot be viewed because of domain restrictions.',
            'type': 'DOMAIN'
          }
        }
      });</span>
      if (typeof(myPlayer.catalog.error) !== 'undefined') {
        specificError = myPlayer.catalog.error.data[0];
        if (specificError !== 'undefined' &amp; specificError.error_subcode == "DOMAIN") {
          <span class="bcls-highlight">myPlayer.error({code:'-3'});</span>
        };
      };
    });

    videojs.getPlayer('myPlayerID').ready(function() {
      var myPlayer = this;
    });
  &lt;/script&gt;</code></pre>
    <p>Der folgende Screenshot zeigt die Anzeige des Fehler-Plugins des definierten Fehlers.</p>
    <figure class="bcls-figure"><img class="bcls-image" alt="defined error" src="/assets/images/troubleshooting/domain-restrictions-errors-plugin.png" /></figure>
  </section>
  <section id="generalerror" class="bcls-section">
    <h2>Allgemeine Fehleranzeige</h2>
    <p>Die beiden obigen Abschnitte befassen sich speziell mit der Anzeige des Fehlers, der beim Anzeigen eines geobeschränkten Videos aus einem eingeschränkten Gebietsschema generiert wird. Einige Fehler geben nicht den Detaillierungsgrad an, den die Domänenbeschränkung bietet. Ein Beispiel für ein Fehlerobjekt dieses Typs wird hier angezeigt. Beachten Sie, dass die <strong>Daten</strong> Das Feld ist leer, während es mit dem Domäneneinschränkungsfehler wichtige Fehlerinformationen enthielt.</p>
    <figure class="bcls-figure"><img class="bcls-image" alt="general error object" src="/assets/images/troubleshooting/domain-restrictions-general-error.png" /></figure>
    <p>Der folgende Code zeigt, wie Informationen von angezeigt werden <code translate="No">catalog.error</code> egal wie detailliert. Auf hoher Ebene führt der Code Folgendes aus:</p>
    <ul>
      <li>Überprüft, ob ein Katalogfehler aufgetreten ist.</li>
      <li>Überprüft, ob im Fehlerobjekt die <code translate="No">data</code> Feld enthält spezifische Fehlerinformationen. Wenn dies NICHT der Fall ist, wird die allgemeine Fehlermeldung in den HTML-Code eingefügt.</li>
      <li>Wenn bestimmte Fehlerinformationen vorliegen UND es sich um Domäneneinschränkungen handelt, wird eine entsprechende Nachricht in den HTML-Code eingefügt.</li>
      <li>Wenn bestimmte Fehlerinformationen vorhanden sind und diese nicht mit Domäneneinschränkungen zusammenhängen, wird die Meldung des bestimmten Fehlers in den HTML-Code eingefügt.</li>
    </ul>
    <pre class="line-numbers" data-start="69">
<code class="language-html" translate="No">  &lt;script type="text/javascript"&gt;
    videojs.getPlayer('myPlayerID').one('bc-catalog-error', function(){
      var myPlayer = this,
        specificError;
      if (myPlayer.catalog.error != undefined) {
        specificError = myPlayer.catalog.error.data[0];
        if (specificError == undefined) {
          document.getElementById("textTarget").innerHTML = "The following error has occurred: &lt;strong&gt;" + myPlayer.catalog.error.message + "&lt;/strong&gt;";
        } else if (specificError.error_subcode == "DOMAIN") {
          document.getElementById("textTarget").innerHTML = "The video you are trying to watch cannot be viewed because of domain restrictions.";
        } else {
          document.getElementById("textTarget").innerHTML = "The following error has occurred: " + specificError.message;
        };
      };
    });

    videojs.getPlayer('myPlayerID').ready(function() {
      var myPlayer = this;
    });
  &lt;/script&gt;</code></pre>
    <p>Der folgende Screenshot zeigt die allgemeine Fehlermeldung, die in HTML angezeigt wird. Natürlich können Sie auch das Fehler-Plugin verwenden, um die Nachricht anzuzeigen, wie im vorherigen Abschnitt dieses Dokuments gezeigt.</p>
    <figure class="bcls-figure"><img class="bcls-image" alt="general error message display below player" src="/assets/images/troubleshooting/domain-restrictions-general-message.png" /></figure>
  </section>
</article>