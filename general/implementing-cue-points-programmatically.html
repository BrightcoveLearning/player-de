---
title: Programmgesteuertes Implementieren von Cue-Points
parent: General Information
description: In this topic, you will gain an understanding of cue points with Brightcove Player. You will then see how to programmatically create cue points and handle when a cue point is dispatched.
---

<article class="bcls-article">
  <h1>Programmgesteuertes Implementieren von Cue-Points</h1>
  <summary>{{ page.description }}</summary>
  <style type="text/css">
.video-js { width: 640px; height: 360px; }
</style>
  <section class="bcls-section">
    <h2 id="Overview">Überblick</h2>
    <p>Cue-Points können für ein Video festgelegt werden. Während der Videowiedergabe wird ein Ereignis ausgelöst, wenn jeder Cue-Punkt getroffen wird.</p>
    <div class="video-cloud-only">
      <p>Spielen Sie das folgende Video ab, um zu sehen, wie der Player die Cue-Point-Informationen vor, während des Würfels (5 Sekunden, 10 Sekunden, 12 Sekunden) und nach dem Würfeln anzeigt.</p>
      <video-js id="myPlayerID" data-video-id="4740963811001" data-account="1752604059001" data-player="VkIrj2aFx" data-embed="default" class="video-js" controls="">&nbsp;</video-js>
      <p>******** Cue Point Information ********</p>
      <p id="insertionPoint">&nbsp;</p>
      <p>****** End Cue Point Information ******</p>
      <aside class="bcls-aside bcls-aside--information">Hinweis: Die <strong>Ich würde</strong> Variablen haben keine zugeordneten Werte, da sie nicht in Video Cloud zugewiesen wurden.</aside>
    </div>
    <div class="player-only">
      <p>Wenn Sie dieses Video abspielen, werden Informationen zu vier Cue-Punkten unter dem Player angezeigt.</p>
      <video-js id="myPlayerID3" data-account="3676484087001" data-player="4f14e962-a11f-441f-8c00-0c89b8edb0a6" data-embed="default" class="video-js" controls="">&nbsp;</video-js>
      <p id="insertionPoint3">&nbsp;</p>
    </div>
  </section>
  <section class="bcls-section">
    <h2 id="Key_concepts">Schlüssel Konzepte</h2>
    <p><span class="video-cloud-only">Einige Konzepte müssen verstanden werden, um Cue-Points in Brightcove Player effektiv nutzen zu können. Diese Konzepte werden in diesem Abschnitt des Dokuments erläutert.</span><span class="player-only">Das folgende Konzept muss verstanden werden, um Cue-Points in Brightcove Player effektiv nutzen zu können.</span></p>
    <div class="video-cloud-only">
      <h3>Video Cloud-Katalog-Cue-Points</h3>
      <p>Das erste zu verstehende Konzept hat mit Terminologie zu tun. In Brightcove Player werden Cue-Punkte gemäß dem HTML-Standard als Textspurelemente gespeichert. Dies bedeutet, dass bei Verwendung eines Video Cloud-Videos alle Cue-Punkte im "Video Cloud-Stil" in Textspuren konvertiert werden.</p>
      <p>Diese Cue-Punkte im "Video Cloud-Stil" können auch als "Katalog" -Cue-Punkte bezeichnet werden, da sie aus dem Video Cloud-Katalog gelesen werden (siehe die <a href="/references/player-catalog.html">Spielerkatalog</a> Dokument für weitere Informationen zum Katalog). Wenn diese Konvertierung stattfindet, werden einige Informationen im Katalog-Cue-Point, wie Typ und Cue-Point-Zeit, in die Textspur konvertiert.</p>
      <h3>Struktur des Katalog-Cue-Points</h3>
      <p>Das nächste zu verstehende Konzept ist, dass es einen signifikanten Unterschied zwischen Katalog-Cue-Points und dem HTML-Standard in der Struktur gibt. Der Unterschied besteht darin, dass ein HTML-Cue-Point eine Dauer haben kann. Dies bedeutet, dass für jeden Cue-Punkt zwei Cue-Punkt-Änderungsereignisse ausgelöst werden: eines am Anfang des Cue-Punkts und eines am Ende des Cue-Punkts.</p>
      <p>Beim Konvertierungsprozess wird jeder Katalog-Cue-Point in einen Cue-Point mit identischen Start- und Stoppzeiten konvertiert. Dies bedeutet, dass für jeden Katalog-Cue-Point zwei Cue-Point-Ereignisse ausgelöst werden und im Code berücksichtigt werden müssen.</p>
    </div>
    <h3><code translate="No">activecues</code> array</h3>
    <p><span class="video-cloud-only">Ein weiterer</span><span class="player-only">Ein</span> Ein wichtiger konzeptioneller Punkt, der beim Umgang mit HTML-Cue-Points zu verstehen ist, ist der <code translate="No">activeCues</code> Array. Alle Cue-Points werden in einem Array definiert. Es gibt ein anderes Array, <code translate="No">activeCues</code> , das die Cue-Punkte enthält, die "aktiv" sind, was bedeutet, dass die Wiedergabezeit zwischen den Start- und Stoppzeiten des Cue-Punkts liegt.</p>
    <p>Bei Verwendung von Katalog-Cue-Points sind die Start- und Stoppzeiten identisch, sodass sie nur für die definierte Sekunde aktiv sind. Bei Katalog-Cue-Punkten ist es außerdem sehr unwahrscheinlich, dass zwei Cue-Punkte gleichzeitig aktiv sind, da sie sich nicht überlappen.</p>
    <aside class="bcls-aside bcls-aside--information">Hinweis: Es können mehrere Sätze von Textspuren vorhanden sein, z. B. ein Satz für Cue-Points und ein anderer für Videotitel. Im Beispielcode in diesem Dokument befinden sich die Cue-Points-Textspuren sowohl im ersten als auch im zweiten Element des TextTracks-Arrays. Sie sehen dies im Code widergespiegelt.</aside>
    <h3>Cue-Point-Typen</h3>
    <p>In diesem Dokument sehen Sie Cue-Points mit a <code translate="No">type</code> Eigenschaft einen Wert zugewiesen. Diese Typwerte werden beim Erstellen von Cue-Points in der Studio-Benutzeroberfläche zugewiesen. Es gibt zwei Arten von Cue-Points, aber beide liefern einfach einen String-Wert an <code translate="No">type</code> Eigentum. Der entsprechende Wert ist nur hilfreich, wenn er in benutzerdefiniertem JavaScript verwendet wird, während die Cue-Point-Informationen verarbeitet werden. Die Typen werden hier detailliert beschrieben:</p>
    <ul>
      <li><strong>Anzeige</strong> - Weist den Zeichenfolgenwert von zu <code translate="No">AD</code> zum <code translate="No">type</code> Eigentum</li>
      <li><strong>Code</strong> - Weist den Zeichenfolgenwert von zu <code translate="No">CODE</code> zum <code translate="No">type</code> Eigentum</li>
    </ul>
  </section>
  <section class="bcls-section video-cloud-only">
    <h2 id="Video_Cloud_cue_points">Video Cloud Cue Points</h2>
    <p>In diesem Abschnitt des Dokuments erfahren Sie, wie Sie Katalog-Cue-Punkte festlegen und auf Ereignis-Dispatches für Katalog-Cue-Punkte warten.</p>
    <h3>Festlegen von Video Cloud-Cue-Punkten</h3>
    <p>Video Cloud-Cue-Points können mithilfe von Video Cloud Studio und auf verschiedene andere in diesem Dokument beschriebene Arten mit einem Video verknüpft werden: <a href="https://studio.support.brightcove.com/media/working-cue-points-media-module.html">Arbeiten mit Cue-Points im Medienmodul</a>.</p>
    <h3>Auf Video Cloud-Cue-Points reagieren - Video statisch an den Player gebunden</h3>
    <p>In diesem Abschnitt des Dokuments erfahren Sie, wie Sie Katalog-Cue-Points verarbeiten, wenn das Video statisch an den Player gebunden wurde. Dies bedeutet, dass das Video entweder in Studio oder direkt über die Player-Verwaltungs-API in den Player geladen wurde.</p>
    <p>Um zu verhindern, dass eine Race-Bedingung versucht, Cue-Punkte zu verarbeiten, bevor sie geladen werden, müssen Sie die verwenden <code translate="No">loadedmetadata</code> Ereignis, das vor dem Umgang mit den Cue-Points ausgelöst werden soll. Sobald die richtige Textspur gelesen wurde, verwenden Sie die <code translate="No">oncuechange</code> Ereignis zum Abhören von Cue-Points-Ereignissen, die ausgelöst werden sollen.</p>
    <p>Der folgende Code zeigt das Abhören von Cue-Punkten und das Anzeigen der Daten vom Cue-Punkt. Beachten Sie, dass in diesem Beispiel das Video statisch an den Player gebunden ist.</p>
    <ul>
      <li>Zeile 24: Erstellen Sie ein Absatzelement als Ort, an dem dynamisch erstelltes HTML injiziert werden soll.</li>
      <li>Zeilen 31,43: Verwenden Sie die <code translate="No">one()</code> Methode zum Hinzufügen eines Ereignis-Listeners für die <code translate="No">loadedmetadata</code> Veranstaltung nur einmal. Die Event-Handler-Funktion wird hier anonym definiert.</li>
      <li>Zeile 32: Rufen Sie das TextTracks-Array mit der <code translate="No">textTracks()</code> Methode ab und weisen Sie dann das Nullloth-Element, das die Cue-Points enthält, der Variablen zu <code translate="No">tt</code>. Beachten Sie, dass es in einigen Implementierungen möglicherweise möglich ist, dass sich die Cue-Points in einem anderen Array-Element befinden könnten. Weitere Informationen <a href="#findtrack">finden Sie im</a> Abschnitt „Richtige Spur suchen“ unten.</li>
      <li>Zeilen 33,41: Legt die Ereignishandler-Funktion fest, wenn das <code translate="No">oncuechange</code>Ereignis ausgelöst wird.</li>
      <li>Zeile 34: Stellen Sie sicher, dass Sie den ersten Cue-Point-Versand (nulltes Array-Element) erhalten. Ohne diese Bedingung würden Sie sehen, dass jeder Cue-Punkt zweimal bearbeitet wird. Beachten Sie, dass diese Bedingung unterschiedlich sein müsste, wenn Sie Cue-Points verwenden, die sich überlappen.</li>
      <li>Zeilen 35-39: Erstellen Sie dynamisch HTML mit Informationen vom Cue-Point und injizieren Sie sie in die HTML-Seite.</li>
      <li>Zeile 42: Spiel das Video ab.</li>
    </ul>
    <pre class="line-numbers" data-start="17">
<code class="language-html" translate="No">&lt;video-js id="myPlayerID"
data-account="1507807800001"
data-player="6aac508a-741e-41a2-bc7a-5805644cf089"
data-embed="default"
data-video-id="1507781667001"
class="video-js" controls&gt;&lt;/video-js&gt;

&lt;p id="insertionPoint"&gt;&lt;/p&gt;
&lt;script src="https://players.brightcove.net/1507807800001/6aac508a-741e-41a2-bc7a-5805644cf089_default/index.min.js"&gt;&lt;/script&gt;
&lt;script&gt;
  videojs.getPlayer('myPlayerID').ready(function() {
    var player = this;
    player.one("loadedmetadata", function () {
      var tt = player.textTracks()[0];
      tt.oncuechange = function () {
        if (tt.activeCues[0] !== undefined) {
          var dynamicHTML = "id: " + tt.activeCues[0].id + ", ";
          dynamicHTML += "text: " + tt.activeCues[0].text + ", ";
          dynamicHTML += "startTime: " + tt.activeCues[0].startTime + ",  ";
          dynamicHTML += "endTime: " + tt.activeCues[0].endTime;
          document.getElementById("insertionPoint").innerHTML += dynamicHTML + "&lt;br/&gt;";
        }
      }
      player.play();
    });
  });
&lt;/script&gt;</code></pre>
    <h3>Aktivieren von Video Cloud-Cue-Points - Laden Sie Videos dynamisch in den Player</h3>
    <p>In diesem Abschnitt des Dokuments erfahren Sie, wie Sie Katalog-Cue-Points verarbeiten, wenn das Video mithilfe von dynamisch in den Player geladen wird <code translate="No">catalog.getVideo()</code> und <code translate="No">catalog.load()</code> Methoden.</p>
    <p>Wenn Sie den Player-Katalog zum Abrufen und Laden des Videos verwenden, ist die Verarbeitung von Cue-Points etwas einfacher als bei Verwendung eines statisch gebundenen Videos, da Sie das nicht verwenden müssen <code translate="No">loadedmetadata</code> Veranstaltung.</p>
    <ul>
      <li>Zeile 76: Erstellen Sie ein Absatzelement als Ort, an dem dynamisch erstelltes HTML injiziert werden soll.</li>
      <li>Zeilen 83,97: Verwenden Sie die <code translate="No">catalog.getVideo()</code> Methode zum Abrufen eines Videos. Die Rückruffunktion wird hier anonym definiert.</li>
      <li>Linie 85: Verwenden Sie die <code translate="No">catalog.load()</code> Methode zum Laden des Videos in den Player.</li>
      <li>Zeile 86: Rufen Sie das TextTracks-Array mit der <code translate="No">textTracks()</code> Methode ab und weisen Sie dann das Nullloth-Element, das die Cue-Points enthält, der Variablen zu <code translate="No">tt</code>. Beachten Sie, dass es in einigen Implementierungen möglicherweise möglich ist, dass sich die Cue-Points in einem anderen Array-Element befinden könnten. Weitere Informationen <a href="#findtrack">finden Sie im</a> Abschnitt „Richtige Spur suchen“ unten.</li>
      <li>Zeilen 87,95: Legt die Ereignishandler-Funktion fest, wenn das <code translate="No">oncuechange</code>Ereignis ausgelöst wird.</li>
      <li>Zeile 88: Stellen Sie sicher, dass der erste Cue-Punkt (nulltes Array-Element) definiert ist. Ohne diese Bedingung würden Sie sehen, dass jeder Cue-Punkt zweimal bearbeitet wird, das zweite Mal ohne definierte Elemente in der <code translate="No">activecues</code> Array (da die zweite Cue-Änderung für das Cue-Point-Ende gilt). Beachten Sie, dass diese Bedingung unterschiedlich sein müsste, wenn Sie Cue-Points verwenden, die sich überlappen.</li>
      <li>Zeilen 89-93: Erstellen Sie dynamisch HTML mit Informationen vom Cue-Point und injizieren Sie sie in die HTML-Seite.</li>
      <li>Zeile 96: Spiel das Video ab.</li>
    </ul>
    <pre class="line-numbers" data-start="69">
<code class="language-html" translate="No">&lt;video-js id="myPlayerID"
  data-account="1507807800001"
  data-player="3c59134e-89e8-4864-87e2-3cc871f8c361"
  data-embed="default"
  data-video-id=""
  class="video-js" controls&gt;&lt;/video-js&gt;

  &lt;p id="insertionPoint"&gt;&lt;/p&gt;

  &lt;script src="https://players.brightcove.net/1507807800001/3c59134e-89e8-4864-87e2-3cc871f8c361_default/index.min.js"&gt;&lt;/script&gt;

  &lt;script&gt;
  videojs.getPlayer('myPlayerID').ready(function() {
    var player = this;
    player.catalog.getVideo('1507781667001', function (error, video) {
      //deal with error
      player.catalog.load(video);
      player.one("loadedmetadata", function () {
        var tt = player.textTracks()[0];
        tt.oncuechange = function () {
          if (tt.activeCues[0] !== undefined) {
            var dynamicHTML = "id: " + tt.activeCues[0].id + ", ";
            dynamicHTML += "text: " + tt.activeCues[0].text + ", ";
            dynamicHTML += "startTime: " + tt.activeCues[0].startTime + ",  ";
            dynamicHTML += "endTime: " + tt.activeCues[0].endTime;
            document.getElementById("insertionPoint").innerHTML += dynamicHTML + "&lt;br/&gt;";
          }
        }
      });
      player.play();
    });
  });
&lt;/script&gt;</code></pre>
    <h3 id="allvcinfo">Rufen Sie alle Video Cloud-Cue-Point-Informationen ab</h3>
    <p>Wie Sie vielleicht bemerkt haben, stehen Ihnen nicht alle Informationen zum Video Cloud-Cue-Point direkt über das zur Verfügung <code translate="No">activecues</code> Array. Dies lässt sich leicht beheben, indem Sie die gewünschten Informationen aus dem Internet abrufen <code translate="No">mediainfo</code> Eigentum.</p>
    <p>Der grundlegende Ansatz dieser Lösung lautet:</p>
    <ol>
      <li>Warten Sie auf die <code translate="No">loadstart</code> Veranstaltung für die <code translate="No">mediainfo</code> zu besiedelnde Eigenschaft.</li>
      <li>Weisen Sie die zu <code translate="No">cue_points</code> Array aus dem <code translate="No">mediainfo</code> Eigenschaft zu einer Variablen. Diese Variable enthält vollständige Informationen zum Video Cloud-Cue-Point.</li>
      <li>Rufen Sie bei einem Cue-Point-Ereignis die entsprechenden Cue-Point-Daten basierend auf dem ab <code translate="No">time</code> Eigentumswert. Dies erfolgt mithilfe einer Hilfsfunktion, die ein Objekt basierend auf einem Eigenschaftswert im Objekt aus einem Array herausholt.</li>
      <li>Verwenden Sie die Daten vom Cue-Point.</li>
    </ol>
    <p>Das folgende Bild zeigt das gesamte Cue-Point-Array (oben links), die einzelne Cue-Point-Datenerfassung (oben rechts) und eine Eigenschaft aus dieser einzelnen Cue-Point-Datenerfassung (unten rechts).</p>
    <figure class="bcls-figure"><img class="bcls-image" alt="cue point data" src="/assets/images/general/cue-point-all-vc-data.png" /></figure>
    <p>Im folgenden Snippet wird nur der neue / geänderte Code aus den obigen Beispielen erläutert.</p>
    <ul>
      <li>Zeilen 452-463: Fügen Sie die Funktion hinzu, mit der eine einzelne Cue-Point-Datenerfassung aus dem Array aller Cue-Points extrahiert wird. Beachten Sie, dass Sie das Array aller Cue-Points, die Eigenschaft, in der Sie nach einem bestimmten Wert suchen, und zuletzt den Wert, nach dem Sie suchen, übergeben.</li>
      <li>Zeile 432: Hört auf die <code translate="No">loadstart</code> Veranstaltung. Wenn Ihr Video geladen wird, wird die <code translate="No">mediainfo</code> Eigenschaft ist ausgefüllt.</li>
      <li>Zeile 434: Weisen Sie das Array aller Video Cloud-Cue-Points einer Variablen zu.</li>
      <li>Zeile 443: Weisen Sie im Cue-Point-Dispatch-Ereignishandler die Datenerfassung des jeweiligen Cue-Points einer Variablen zu. Hier wird die im ersten Aufzählungspunkt erwähnte Funktion aufgerufen. Die verwendeten Argumente sind:
        <ul>
          <li><code translate="No">cuePointAra</code>: Die gesamte Sammlung von Video Cloud-Cue-Points.</li>
          <li><code translate="No">'time'</code>: Die Eigenschaft, in der nach einem Wert gesucht werden soll.</li>
          <li><code translate="No">tt.activeCues[0].startTime</code>: Die Startzeit des Cue-Points, der derzeit im Cue-Point-Dispatch-Event-Handler verarbeitet wird.</li>
        </ul>
      </li>
      <li>Zeilen 444-445: Debuggen <code translate="No">console.log()</code> Methodenaufrufe, die im Produktionscode entfernt werden sollten.</li>
    </ul>
    <pre class="line-numbers" data-start="426">
<code class="language-html" translate="No">&lt;script&gt;
  videojs.getPlayer('myPlayerID').ready(function() {
    var myPlayer = this,
      cuePointAra = [],
      allCuePointData;
    myPlayer.on('loadstart', function () {
      //console.log('mediainfo', myPlayer.mediainfo);
      cuePointAra = myPlayer.mediainfo.cue_points;
      var tt = myPlayer.textTracks()[0];
      tt.oncuechange = function () {
        if (tt.activeCues[0] !== undefined) {
          var dynamicHTML = "id: " + tt.activeCues[0].id + ", ";
          dynamicHTML += "text: " + tt.activeCues[0].text + ", ";
          dynamicHTML += "startTime: " + tt.activeCues[0].startTime + ",  ";
          dynamicHTML += "endTime: " + tt.activeCues[0].endTime;
          document.getElementById("insertionPoint").innerHTML += dynamicHTML + "&lt;br/&gt;";
          allCuePointData = getSubArray(cuePointAra, 'time', tt.activeCues[0].startTime);
          console.log('cue point data:', allCuePointData);
          console.log('cue point metadata:', allCuePointData[0].metadata);
        }
      }
      myPlayer.play();
      myPlayer.muted(true);
    });

    function getSubArray(targetArray, objProperty, value) {
      var i, totalItems = targetArray.length,
        objFound = false,
        idxArr = [];
      for (i = 0; i &lt; totalItems; i++) {
        if (targetArray[i][objProperty] === value) {
          objFound = true;
          idxArr.push(targetArray[i]);
        }
      }
      return idxArr;
    };
  });
&lt;/script&gt;</code></pre>
  </section>
  <section class="bcls-section">
    <h2 id="HTML5_standard_cue_points">HTML5-Standard-Cue-Points</h2>
    <p>HTML5-Standard-Cue-Points werden als Track-Elemente in einem vorgeschriebenen Format gespeichert. Gute Einführungsinhalte finden Sie im folgenden HTML5 Rocks-Tutorial: <a href="//www.html5rocks.com/en/tutorials/track/basics/">Erste Schritte mit dem Track-Element</a>. In diesem Abschnitt des Dokuments erfahren Sie, wie WebVTT-Cue-Point-Dateien formatiert werden und wie diese Cue-Points verarbeitet werden.</p>
    <h3>WebVTT-Dateiformat für Cue-Points</h3>
    <p>Das WebVTT-Dateiformat ist streng definiert. Für Cue-Points besteht die Datei wie folgt:</p>
    <ul>
      <li>Die Saite <strong>WebVTT</strong> als erste Zeile der Datei</li>
      <li>Eine einzelne leere Zeile</li>
      <li>Die Kennung für einen bestimmten Cue-Point</li>
      <li>Die Dauer im Formular <strong>00: 00: 00.000 -&gt; 00: 00: 00.000</strong> ;; Dies ist Stunden: Minuten: Sekunden. Millisekunden-Format und wird streng analysiert. Zahlen müssen bei Bedarf mit Nullen aufgefüllt werden</li>
      <li>Die Zeichen, die der Dauer bis zur nächsten Leerzeile folgen, werden in a eingefügt <strong>Text</strong> Wert; Wenn Sie hier mehrere unterschiedliche Werte speichern möchten, funktioniert JSON gut, da es leicht analysiert werden kann</li>
      <li>Eine einzelne leere Zeile</li>
      <li>Mit dem Format Bezeichner / Dauer / Text / Leerzeile können mehrere Cue-Punkte hinzugefügt werden</li>
    </ul>
    <aside class="bcls-aside bcls-aside--tip">Hinweis: Damit können Sie Ihr WebVTT-Format validieren <a href="//quuz.org/webvtt/">Prüfer</a>.</aside>
    <p>Das folgende Dokument ist ein gültiges WebVTT-Cue-Point-Dokument, das zwei Cue-Points definiert, einen mit einer Dauer von 2 bis 5 Sekunden und einen mit einer Dauer von 10 bis 15 Sekunden:</p>
    <pre class="line-numbers">
<code class="language-javascript" translate="No">WEBVTT

multiCell
00:00:02.000 --&gt; 00:00:05.000
{
"title": "Multi-celled organisms",
"description": "Multi-celled organisms have different types of cells that perform specialized functions.",
"src": "multiCell.jpg",
"href": "http://en.wikipedia.org/wiki/Multicellular"
}

insects
00:00:10.000 --&gt; 00:00:15.000
{
"title": "Insects",
"description": "Insects are the most diverse group of animals on the planet with estimates for the total number of current species range from two million to 50 million. The first insects appeared around 400 million years ago, identifiable by a hard exoskeleton, three-part body, six legs, compound eyes and antennae.",
"src": "insects.jpg",
"href": "http://en.wikipedia.org/wiki/Insects"
}</code></pre>
    <p>Wenn Sie das folgende Video abspielen, wird die oben gezeigte Cue-Point-WebVTT-Datei verarbeitet. Zu Beginn eines Cue-Points wird dynamisch erstelltes HTML in die Seite eingefügt, gefolgt von etwas analysiertem JSON aus dem <strong>Text</strong> Feld. Am Ende des Cue-Points die Nachricht <strong>Cue-Point-Dauer vorbei</strong> wird angezeigt.</p>
    <video-js id="myPlayerID2" data-video-id="4607357817001" data-account="1752604059001" data-player="VkIrj2aFx" data-embed="default" class="video-js" controls="">
      <track kind="metadata" src="https://solutions.brightcove.com/bcls/tests/player/cuepoints.vtt" />
    </video-js>
    <p>******** Cue Point Information ********</p>
    <p id="insertionPoint2">&nbsp;</p>
    <p>****** End Cue Point Information ******</p>
    <h3>Prozess-Cue-Points-Übersicht</h3>
    <p>Die grundlegenden Schritte zur Verwendung von HTML5-Standard-Cue-Points sind:</p>
    <ol>
      <li>Lesen Sie die WebVTT-Datei mit den Cue-Points mit a ein <code translate="No">&lt;track&gt;</code> Tag als Kind der verschachtelt <code translate="No">&lt;video-js&gt;</code> Etikett.</li>
      <li>In einem <code translate="No">loadedmetadata</code> Ereignisbehandlungsroutine, rufen Sie das richtige Textspurelement ab.</li>
      <li>Konfigurieren Sie im selben Ereignishandler einen zweiten Ereignishandler für das <code translate="No">oncuechange</code> Cue-Point-Ereignis.</li>
      <li>In dem <code translate="No">oncuechange</code> Event-Handler, überprüfen Sie, ob die <code translate="No">activecues</code> Für das Array-Objekt ist das nullte Element definiert. Wenn ja, wird auf den Start des Cue-Punkts reagiert. <aside class="bcls-aside bcls-aside--information">Hinweis: Du wirst haben <code translate="No">oncuechange</code> Ereignisse, die ausgelöst werden, wenn der Cue-Point sowohl startet als auch stoppt. Das <code translate="No">activecues</code> Das Array hat nur für die Dauer des Cue-Points einen Wert. Daher, wenn ein <code translate="No">oncuechange</code> Ereignis eintritt und es keine definierten Objekte in der <code translate="No">activecues</code> Array, wissen Sie, dass das gesendete Ereignis für einen Cue-Point-Stopp ist.</aside>
      </li>
      <li>In dem <code translate="No">oncuechange</code> Event-Handler, überprüfen Sie, ob die <code translate="No">activecues</code> Für das Array-Objekt ist das nullte Element definiert. Wenn nein, wird auf den Cue-Point-Stopp gewirkt.</li>
    </ol>
    <aside class="bcls-aside bcls-aside--information">Hinweis: Wenn sich Ihre Cue-Punkte überlappen, muss die Logik in den obigen Schritten leicht geändert werden.</aside>
    <div class="video-cloud-only">
      <h3>Cue-Point-Code verarbeiten</h3>
      <p>&nbsp;</p>
      <ul>
        <li>Zeile 122: Erstellen Sie eine Textspur, indem Sie die webVTT-Datei mit dem <code translate="No">&lt;track&gt;</code> Tag einlesen.</li>
        <li>Zeile 126: Erstellen Sie ein Absatzelement als Ort, an dem dynamisch erstelltes HTML injiziert werden soll.</li>
        <li>Zeilen 134, 152: Verwenden Sie die <code translate="No">one()</code> Methode, um nur einmal auf das <code translate="No">loadedmetadata</code> Ereignis zu hören. Die Event-Handler-Funktion wird hier anonym definiert.</li>
        <li>Zeile 135: Weisen Sie einer Variablen den Index der zuletzt geladenen Textspur zu.</li>
        <li>Zeile 136: Rufen Sie das TextTracks-Array mit der <code translate="No">textTracks()</code> Methode ab, mit der das letzte Element des Arrays einer Variablen zugewiesen wird, indem Sie den im vorherigen Schritt festgelegten Index verwenden. Variationen dieser Logik <a href="#findtrack">finden Sie</a> im Abschnitt „Richtige Spur suchen“ unten.</li>
        <li>Zeilen 137, 149: Legt die Ereignishandler-Funktion fest, wenn das <code translate="No">oncuechange</code>Ereignis ausgelöst wird.</li>
        <li>Zeile 138: Stellen Sie sicher, dass der erste Cue-Point (Null-Array-Element) im ActiveCues-Array definiert ist. Dies sagt Ihnen, dass dies ein Start-Cue-Point-Ereignis ist.</li>
        <li>Zeilen 139-145: Erstellen Sie dynamisch HTML mit Informationen vom Cue-Point und injizieren Sie sie in die HTML-Seite. Dies beinhaltet das Analysieren von JSON und das Anzeigen verschiedener Felder dieses JSON.</li>
        <li>Zeilen 146-147: Zeigen Sie eine Notiz an, dass das Cue-Point-Ende erreicht wurde.</li>
        <li>Zeile 150: Spiel das Video ab.</li>
      </ul>
      <pre class="line-numbers" data-start="115">
<code class="language-html" translate="No">&lt;video-js id="myPlayerID2"
  data-account="1752604059001"
  data-player="8cfb6785-c4be-43b4-af68-7ca2fe3a6ebf"
  data-embed="default"
  data-video-id="3851380732001"
  class="video-js" controls&gt;

  &lt;track kind="metadata" src="https://solutions.brightcove.com/bcls/tests/player/cuepoints.vtt" /&gt;
&lt;/video-js&gt;

&lt;p id="insertionPoint2"&gt;&lt;/p&gt;

&lt;script src="https://players.brightcove.net/1752604059001/8cfb6785-c4be-43b4-af68-7ca2fe3a6ebf_default/index.min.js"&gt;&lt;/script&gt;

&lt;script type="text/javascript"&gt;
  videojs.getPlayer('myPlayerID').ready(function() {
    var myPlayer = this;
    myPlayer.one("loadedmetadata", function () {
      var trackIndex = myPlayer.textTracks().length - 1;
      var tt = myPlayer.textTracks()[trackIndex];
      tt.oncuechange = function () {
        if (tt.activeCues[0] !== undefined) {
          var dynamicHTML = "id: " + tt.activeCues[0].id + ", ";
          dynamicHTML += "text: " + tt.activeCues[0].text + ", ";
          dynamicHTML += "startTime: " + tt.activeCues[0].startTime + ",  ";
          dynamicHTML += "endTime: " + tt.activeCues[0].endTime;
          document.getElementById("insertionPoint2").innerHTML += dynamicHTML + "&lt;br/&gt;&lt;br/&gt;";
          jsonData = JSON.parse(tt.activeCues[0].text);
          document.getElementById("insertionPoint2").innerHTML += jsonData.title + ": " + jsonData.description + "&lt;br/&gt;&lt;br/&gt;";
        } else {
          document.getElementById("insertionPoint2").innerHTML += "Cue point duration over" + "&lt;br/&gt;&lt;br/&gt;";
        }
      } //end oncuechange
      myPlayer.play();
      myPlayer.muted(true);
    }); //end loadedmetadata
  }); //end ready
&lt;/script&gt;</code></pre>
    </div>
    <div class="player-only">
      <h3>Cue-Point-Code verarbeiten</h3>
      <p>&nbsp;</p>
      <ul>
        <li>Zeile 270: Erstellen Sie eine Textspur, indem Sie die webVTT-Datei mit dem <code translate="No">&lt;track&gt;</code> Tag einlesen.</li>
        <li>Zeile 273: Erstellen Sie ein Absatzelement als Ort, an dem dynamisch erstelltes HTML injiziert werden soll.</li>
        <li>Zeilen 285.309: Verwenden Sie die <code translate="No">one()</code> Methode, um nur einmal auf das <code translate="No">loadedmetadata</code> Ereignis zu hören. Die Event-Handler-Funktion wird hier anonym definiert.</li>
        <li>Zeile 286: Weisen Sie einer Variablen den Index der zuletzt geladenen Textspur zu.</li>
        <li>Zeile 287: Rufen Sie das TextTracks-Array mit der <code translate="No">textTracks()</code> Methode ab, mit der das letzte Element des Arrays einer Variablen zugewiesen wird, indem Sie den im vorherigen Schritt festgelegten Index verwenden. Variationen dieser Logik <a href="#findtrack">finden Sie</a> im Abschnitt „Richtige Spur suchen“ unten.</li>
        <li>Zeilen 289.301: Legt die Ereignishandler-Funktion fest, wenn das <code translate="No">oncuechange</code>Ereignis ausgelöst wird.</li>
        <li>Zeile 290: Stellen Sie sicher, dass der erste Cue-Point (Null-Array-Element) im ActiveCues-Array definiert ist. Dies sagt Ihnen, dass dies ein Start-Cue-Point-Ereignis ist.</li>
        <li>Zeilen 291-294: Erstellen Sie dynamisch HTML mit Informationen vom Cue-Point und injizieren Sie sie in die HTML-Seite. Dies beinhaltet das Analysieren von JSON und das Anzeigen verschiedener Felder dieses JSON.</li>
        <li>Zeilen 295-297: Zeigen Sie eine Notiz an, dass das Cue-Point-Ende erreicht wurde.</li>
        <li>Zeile 302: Spiel das Video ab.</li>
      </ul>
      <p>&nbsp;</p>
    </div>
    <p>Man könnte annehmen, dass Sie die WebVTT-Datei programmgesteuert mit dem hinzufügen könnten <code translate="No">addRemoteTextTrack()</code> Methode. In diesem Fall wäre dies nicht zuverlässig, da es zu einer Rennbedingung kommen kann, bei der die Cue-Punkte nicht verarbeitet werden können, bevor Sie versuchen, sie zu verwenden. Es ist sicher, die WebVTT-Datei mit dem hinzuzufügen <code translate="No">&lt;track&gt;</code> Tag wie gezeigt.</p>
  </section>
  <section class="bcls-section">
    <h2 id="findtrack">Finde den richtigen Track</h2>
    <p>An mehreren Stellen in diesem Dokument kann ein mögliches Problem auftreten, wenn einem Player mehrere Textspuren zugeordnet sind. Es wurde angenommen, dass dem Player nur eine Textspur zugeordnet ist, sodass dieser Code verwendet wurde: <code translate="No">var tt = myPlayer.textTracks()[0];</code>. Bei Auswahl des nullten Array-Elements wird eine einzelne Textspur vorausgesetzt, die dem Player zugeordnet ist.</p>
    <p>Textspuren werden nicht nur für Cue-Points verwendet, sondern auch für andere Arten von Daten. Das <strong>nett</strong> Das Attribut kann die folgenden Werte enthalten:</p>
    <ul>
      <li>Untertitel</li>
      <li>Bildunterschriften</li>
      <li>Beschreibungen</li>
      <li>Kapitel</li>
      <li>Metadaten</li>
    </ul>
    <p>Dies bedeutet, dass dem Player möglicherweise mehrere Textspuren zugeordnet werden können und dass ein Weg erforderlich ist, um die richtige für Ihre Anwendungslogik zu finden. Der folgende Code durchläuft die verfügbaren Textspuren bis zum <strong>Metadaten</strong> (Cue Point) Wert wird gefunden:</p>
    <pre class="line-numbers">
<code class="language-html" translate="No">&lt;script type="text/javascript"&gt;
  videojs.getPlayer('myPlayerID').ready(function() {
    var myPlayer = this,
      allTextTacks,
      attLength,
      tt;
    myPlayer.one("loadedmetadata", function () {
      allTextTacks = myPlayer.textTracks();
      attLength = allTextTacks.length;
      for (var i = 0; i &lt; attLength; i++) {
        if (allTextTacks[i].kind === 'metadata') {
          tt = allTextTacks[i];
          break;
        };
      };
    });
  });
&lt;/script&gt;</code></pre>
    <p>Die Logik aus vorherigen Beispielen könnte dann verwendet werden, um die Cue-Punkte unter Verwendung von zu verarbeiten <code translate="No">tt</code> Variable, die die gewünschte Textspur enthält.</p>
  </section>
  <section class="bcls-section video-cloud-only">
    <h2 id="Programmatic_cue_points">Programmatische Cue-Points</h2>
    <p>Es ist möglich, programmgesteuert Cue-Points hinzuzufügen. Die Schlüsselmethode stammt aus HTML5 <code translate="No">VTTCue</code> Schnittstelle. Sie können Cue-Points mit der folgenden Syntax erstellen:</p>
    <pre>
<code class="language-javascript" translate="No">new VTTCue( startTime, endTime, text )</code></pre>
    <p>Die Logik der Verarbeitung der Cue-Points ist den vorherigen Beispielen sehr ähnlich, sodass nur der Code aufgeführt wird, der sich von dem oben verwendeten unterscheidet.</p>
    <ul>
      <li>
        <p>Zeilen 43,44: Fügt a hinzu <code translate="No">textTrack</code> Element für den Spieler mit dem Spieler <code translate="No">addRemoteTextTrack()</code> Methode. Präzisiere das <code translate="No">kind</code> sein <strong>Metadaten</strong> , und ein <code translate="No">label</code> , in diesem Fall <strong>Zeitgesteuerter Cue-Point</strong>.</p>
        <aside class="bcls-aside bcls-aside--information">Hinweis: Da nur entfernte Textspuren von einem Player entfernt werden können, empfehlen wir die Verwendung der <a href="https://docs.brightcove.com/brightcove-player/current-release/Player.html#addRemoteTextTrack">addRemoteTextTrack()</a> Methode.</aside>
      </li>
      <li>
        <p>Zeilen 45-48: Warten Sie 10 Millisekunden, bevor Sie mit dem Player zwei Cue-Points erstellen <code translate="No">addCue()</code> Methode. Die Cue-Points werden mithilfe von HTML5 instanziiert <code translate="No">VTTCue()</code> Konstrukteur.</p>
        <aside class="bcls-aside bcls-aside--tip">Bei Safari und iOS müssen Sie warten, bevor Sie Cue-Points hinzufügen, oder sie werden nicht hinzugefügt. Dies liegt daran, dass der Brightcove Player im Safari-Browser und auf iOS native, asynchrone Spuren verwendet.</aside>
      </li>
      <li>Zeile 22: Hört auf die <code translate="No">addtrack</code> Veranstaltung.</li>
      <li>Zeile 23: Ruft alle dem Player zugeordneten Textspuren ab.</li>
      <li>Zeile 24: Legt die <code translate="No">attLength</code> variabel zur Anzahl der Textspuren. Dieser Wert wird in einer Schleife im nächsten Codesegment verwendet.</li>
      <li>Zeilen 25-30: Durchlaufen Sie jede Textspur und prüfen Sie, ob die <code translate="No">label</code> gleich dem richtigen Wert sein. Wenn gefunden, weisen Sie die aktuelle Textspur einer Variablen zu und brechen Sie aus der Schleife aus.</li>
    </ul>
    <aside class="bcls-aside bcls-aside--tip">Hinweis: Außerhalb des folgenden Lernbeispielcodes ist es sehr wahrscheinlich, dass die Cue-Points in einer Schleife über eine Datenstruktur mit wichtigen Cue-Point-Informationen erstellt werden.</aside>
    <pre class="line-numbers" data-start="1">
<code class="language-html" translate="No">&lt;video-js id="myPlayerID"
  data-video-id="4607746980001"
  data-account="1507807800001"
  data-player="default"
  data-embed="default"
  class="video-js"
  width="640" height="360"
  controls&gt;&lt;/video-js&gt;

&lt;script src="https://players.brightcove.net/1507807800001/default_default/index.min.js"&gt;&lt;/script&gt;

&lt;p id="insertionPoint"&gt;&lt;/p&gt;

&lt;script type="text/javascript"&gt;
  videojs.getPlayer("myPlayerID").ready(function () {
    var myPlayer = this,
      textTrack = [],
      allTextTacks,
      attLength,
      tt;
    myPlayer.one("loadedmetadata", function () {
      myPlayer.textTracks().addEventListener('addtrack', function () {
        allTextTacks = myPlayer.textTracks();
        attLength = allTextTacks.length;
        for (var i = 0; i &lt; attLength; i++) {
          if (allTextTacks[i].label === 'Timed Cue Point') {
            tt = allTextTacks[i];
            break;
          }
        }
        tt.oncuechange = function () {
          if (tt.activeCues[0] !== undefined) {
            var dynamicHTML = "id: " + tt.activeCues[0].id + ", ";
            dynamicHTML += "text: &lt;strong&gt;" + tt.activeCues[0].text + "&lt;/strong&gt;, ";
            dynamicHTML += "startTime: &lt;strong&gt;" + tt.activeCues[0].startTime + "&lt;/strong&gt;,  ";
            dynamicHTML += "endTime: &lt;strong&gt;" + tt.activeCues[0].endTime + "&lt;/strong&gt;";
            document.getElementById("insertionPoint").innerHTML += dynamicHTML + "&lt;br/&gt;&lt;br/&gt;";
          } else {
            document.getElementById("insertionPoint").innerHTML += "Cue point duration over" + "&lt;br/&gt;&lt;br/&gt;";
          }
        }; //end oncuechange
      }); // end playing
      textTrack = myPlayer.addRemoteTextTrack({kind: 'metadata', label: 'Timed Cue Point', mode: 'hidden'}, false);
      textTrack.track.mode = 'hidden';
      setTimeout(function(){
        textTrack.track.addCue(new window.VTTCue(2, 5, 'cue point 1 text'));
        textTrack.track.addCue(new window.VTTCue(10, 15, 'cue point 2 text'));
      }, 10);
    }); //end on loadedmetadata
  }); //end ready
&lt;/script&gt;</code></pre>
    <p>Der Code generiert die Ausgabe wie im folgenden Screenshot gezeigt. Beachten Sie das <strong>Ich würde</strong> Bei Verwendung von wird kein Wert angegeben <code translate="No">VTTCue()</code> Konstruktormethode.</p>
    <figure class="bcls-figure"><img class="bcls-image" alt="dynamic cue points" src="/assets/images/general/cue-points-dynamic.png" /></figure>
  </section>
  <section class="bcls-section">
    <h2 id="ID3_and_media_cue_points">ID3- und Media-Cue-Points</h2>
    <p>Wenn Sie ID3-Cue-Points oder Media-Cue-Points mit Ihren Medien verknüpft haben, können Sie diese mithilfe der <code translate="No">id3CuePointsTrack()</code> und <code translate="No">mediaCuePointsTrack()</code> Methoden. Um beispielsweise auf Cue-Point-Änderungen zu warten, verwenden Sie Folgendes:</p>
    <pre class="line-numbers">
<code class="language-javascript" translate="No">videojs.getPlayer('myPlayerID').ready(function () {
  var myPlayer = this;
  myPlayer.one("canplay", function () {
    <span class="bcls-highlight">myPlayer.id3CuePointsTrack().on('cuechange', function () {
      // process cue point here
    });</span>
  });
});</code></pre>
    <h3>ID3 Details</h3>
    <p>Im Folgenden finden Sie weitere Informationen zur Verwendung von ID3-Cue-Points:</p>
    <ul>
      <li>ID3-Tags können verwendet werden, um zeitgesteuerte Metadaten in den Stream einzufügen.</li>
      <li>Sie können mehrere ID3-Frames pro Segment haben.</li>
      <li>Brightcove Player analysiert ID3-Cue-Punkte und macht sie mithilfe der oben genannten Informationen als Textspur verfügbar <code translate="No">id3CuePointsTrack()</code> Methode.</li>
      <li>Es ist eine bewährte Methode, auf das zu warten <code translate="No">canplay</code> Ereignis oder es besteht die Möglichkeit, dass der Titel beim Versuch, darauf zuzugreifen, nicht abrufbar ist.</li>
      <li>Es werden mehrere Frames pro Tag unterstützt.</li>
    </ul>
  </section>
  <section class="bcls-section">
    <h2 id="Known_issues">Bekannte Probleme</h2>
    <ul>
      <li>Auf Safari werden Cue-Punkte nicht ausgelöst, wenn die Endzeit der Startzeit entspricht. Wenn also die Safari-Kompatibilität ein Problem darstellt, benötigen die Cue-Points eine Dauer größer als Null.</li>
    </ul>
  </section>
</article>
<script src="https://players.brightcove.net/1752604059001/VkIrj2aFx_default/index.min.js"></script><script src="https://players.brightcove.net/3676484087001/4f14e962-a11f-441f-8c00-0c89b8edb0a6_default/index.min.js"></script><script>
  videojs.getPlayer('myPlayerID').ready(function() { var player = this; player.one("loadedmetadata",function(){ var tt = player.textTracks()[0]; tt.oncuechange = function( ) { if(tt.activeCues[0] !== undefined){ var dynamicHTML = "id: <strong> " + tt.activeCues[0].id + ", "; dynamicHTML += "text: <strong> " + tt.activeCues[0].text + ", "; dynamicHTML += "startTime: <strong> " + tt.activeCues[0].startTime + ", "; dynamicHTML += "endTime: <strong> " + tt.activeCues[0].endTime + ""; document.getElementById("insertionPoint").innerHTML += dynamicHTML + "<br/>"; } } //player.play(); player.muted(true); }); });
  </script><script>
  videojs.getPlayer('myPlayerID2').ready(function() { var myPlayer = this; myPlayer.one("loadedmetadata",function(){ var trackIndex = myPlayer.textTracks().length -1; var tt = myPlayer. textTracks()[trackIndex]; tt.oncuechange = function() { if(tt.activeCues[0] !== undefined){ console.log('tt.activeCues[0]',tt.activeCues[0]); var dynamicHTML = "id: <strong> " + tt.activeCues[0].id + ", "; dynamicHTML += "text: <strong> " + tt.activeCues[0].text + ", "; dynamicHTML += "startTime: <strong> " + tt.activeCues[0].startTime + ", "; dynamicHTML += "endTime: <strong> " + tt.activeCues[0].endTime + ""; document.getElementById("insertionPoint2").innerHTML += dynamicHTML + "<br/><br/>"; jsonData = JSON.parse(tt.activeCues[0].text); document.getElementById("insertionPoint2").innerHTML += jsonData.title + ": " + jsonData.description + "<br/><br/>"; } else { document.getElementById("insertionPoint2").innerHTML += "<strong>Cue point duration over" + "<br/><br/>"; } } //end oncuechange //myPlayer.play(); myPlayer.muted(true); }); //end loadedmetadata }); //end ready
  </script><script>
  var myPlayer3, textTrack; videojs.getPlayer('myPlayerID3').ready(function() { var myPlayer3 = this; myPlayer3.src({ "type": "video/mp4", "src": "//solutions.brightcove.com/bcls/assets/videos/Water-In-Motion.mp4" }); textTrack = myPlayer3.addTextTrack('metadata', 'Timed Cue Point'); textTrack.addCue(neues Fenster.VTTCue(2,4,'Cue-Punkt 1 Text')); textTrack.addCue(neues Fenster.VTTCue(6,8,'Cue-Punkt 2 Text')); textTrack.addCue(neues Fenster.VTTCue(10,11,'Cue-Punkt 3 Text')); textTrack.addCue(new window.VTTCue(15,20,'Cue-Punkt 4 Text - LETZTER CUEPOINT')); var tt = myPlayer3.textTracks()[0]; tt.oncuechange = function() { if(tt.activeCues[0] !== undefined){ //var dynamicHTML = "id: " + tt.activeCues[0].id + ", "; var dynamicHTML = "text: <strong> " + tt.activeCues[0].text + ", "; dynamicHTML += "startTime: <strong> " + tt.activeCues[0].startTime + ", "; dynamicHTML += "endTime: <strong> " + tt.activeCues[0].endTime + ""; document.getElementById("insertionPoint3").innerHTML += dynamicHTML + "<br/>"; } else { document.getElementById("insertionPoint3").innerHTML += "Cue point duration over" + "<br/><br/>"; } } //end oncuechange }); //end ready
  </script>