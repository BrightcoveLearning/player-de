---
title: AMP mit einem externen Video
parent: amp
description: In this topic, you will learn how Accelerated Mobile Pages (AMP) can be used with Brightcove Player and an external, non-Video Cloud video.
---

<article class="bcls-article">
    <h1>AMP mit einem externen Video</h1>
    <summary>{{ page.description }}</summary>
    <section class="bcls-section">
        <aside class="bcls-aside bcls-aside--warning">Dieses Dokument verwendet AMP mit Brightcove Player und ein Video, das NICHT in die Video Cloud aufgenommen wird. Wenn Sie ein Video Cloud-Kunde sind, lesen Sie <a href="/playback/amp-using-video-cloud-video.html">AMP Using a Video Cloud Video</a>.</aside>
        <h2 id="Overview">Überblick</h2>
        <p>Accelerated Mobile Pages ist ein Google-Projekt, das darauf abzielt, „die Erstellung von Websites und Anzeigen zu ermöglichen, die auf Geräten und Vertriebsplattformen durchweg schnell, schön und leistungsstark sind. „ Sie können Brightcove Player mit AMP verwenden, da das Projekt eine <code translate="No">amp-brightcove</code> Komponente enthält, die es Publishern ermöglicht, Brightcove Player in AMP HTML-Dokumente einzubetten. In diesem Beispiel wird ein benutzerdefiniertes Plugin verwendet, das eine URL zu einem externen (Nicht-Video-Cloud-Video) -Video akzeptiert, das über die <code translate="No">amp-brightcove</code> Komponente mithilfe des benutzerdefinierten Videos an es übergeben wird <code translate="No">data-param-video-url</code> Attribut.</p>
    </section>
    <section class="bcls-section">
        <h2 id="Sample">Probe</h2>
        <p>Im Folgenden finden Sie eine Beispiel-AMP-HTML-Seite, die einen Brightcove Player enthält. Der Player funktioniert normal, daher ist der HTML-Code der interessante Teil dieses Beispiels. Der HTML-Code wird später in diesem Dokument untersucht.</p>
        <p data-height="416" data-theme-id="dark" data-slug-hash="XZGQza" data-default-tab="html,result" data-user="rcrooks1969" data-embed-version="2" data-pen-title="AMP-Brightcove Player-External Video" class="codepen">Sehen Sie sich das Pen <a href="https://codepen.io/team/rcrooks1969/pen/XZGQza/">Amp-BrightCove Player-Externes Video</a> von Brightcove Learning Services (<a href="https://codepen.io/rcrooks1969">@rcrooks1969</a>) auf <a href="https://codepen.io">CodePen an</a>.</p>
        <script async src="https://static.codepen.io/assets/embed/ei.js"></script>
        <aside class="bcls-aside bcls-aside--warning">Beachten Sie, dass Sie aufgrund der Funktionsweise von AMP die Einschränkungen vor der Verwendung sorgfältig prüfen müssen. Zum Beispiel:
            <ul>
                <li>AMP hat sehr strenge Regeln, welche HTML auf einer Seite verwendet werden kann und was nicht. Details dazu können in der <a href="https://www.ampproject.org/docs/reference/spec">AMP HTML-Spezifikation eingesehen werden</a>.</li>
                <li>Brightcove Analytics meldet die verweisende Seite für AMP-Seiten nicht korrekt - stattdessen die <code translate="No">referrer_domain</code> wird leer sein, und <code translate="No">source_type</code> wird aufgezeichnet als <code translate="No">direct</code>.</li>
                <li>Nicht alle Attribute, die mit der erweiterten Seitenimplementierung von Brightcove Player verwendet werden, sind mit gültig <code translate="No">amp-brightcove</code>.</li>
                <li>AMP funktioniert nicht mit Spielern mit Domain-eingeschränkten Spielern.</li>
            </ul>
        </aside>
    </section>
    <section class="bcls-section">
        <h2 id="Resources_from_AMP">Ressourcen von AMP</h2>
        <p>Das AMP-Projekt entwickelte eine spezielle <code translate="No">amp-brightcove</code> Komponente, die den Brightcove Player anzeigt. Die Komponente ist im <a href="https://www.ampproject.org/docs/reference/components/amp-brightcove">amp-brightcove-Dokument detailliert beschrieben.</a></p>
        <p>AMP bietet eine <code translate="No">amp-brightcove</code> Beispielimplementierung mit Details in den folgenden Dokumenten:</p>
        <ul>
            <li><a href="https://ampbyexample.com/components/amp-brightcove/">amp-brightcove</a></li>
            <li><a href="https://github.com/ampproject/amp-by-example/blob/master/src/20_Components/amp-brightcove.html">Ampere-für-Beispiel</a></li>
            <li><a href="https://ampbyexample.com/playground/#url=https%3A%2F%2Fampbyexample.com%2Fcomponents%2Famp-brightcove%2Fsource%2F">AMP Spielplatz</a></li>
        </ul>
    </section>
    <section class="bcls-section">
        <h2 id="Player_configuration">Player-Konfiguration</h2>
        <p>Brightcove liefert ein Plugin, um die Verwendung von AMP mit Brightcove Player zu verbessern. Das Plugin fügt Unterstützung für die Video-Interface-API von AMP hinzu, die einige erweiterte Funktionen ermöglicht:</p>
        <ul>
            <li><strong>Integration mit Amp-Analytics</strong>: Ermöglicht die Verfolgung von Ansichten auf Analysen von Drittanbietern gegenüber der AMP-Seitendomäne</li>
            <li><strong>Integration mit amp-Bind</strong>: Die Wiedergabe kann durch andere Elemente auf der AMP-Seite gesteuert werden.</li>
        </ul>
        <p>Spieler ohne das Plugin arbeiten immer noch in AMP, aber ohne diese Funktionalität.</p>
        <h3><strong>Plugin-Installation</strong></h3>
        <aside class="bcls-aside bcls-aside--warning">Sie MÜSSEN das Plugin installieren. In der Vergangenheit würde AMP funktionieren, ohne das Plugin hinzuzufügen. Das stimmt nicht mehr.</aside>
        <p>Wie bei allen Brightcove Player-Plugins benötigen Sie den Namen und die URL des Plugins zum JavaScript des Plugins, die hier zur Verfügung gestellt werden (für die Verwendung dieses Plugins ist keine CSS-Datei erforderlich):</p>
        <h4>Name des Plugins</h4>
        <pre class="line-numbers">
  <code class="language-html" translate="No">ampSupport</code></pre>
        <h4>JavaScript URL</h4>
        <pre class="line-numbers">
  <code class="language-html" translate="No">//players.brightcove.net/videojs-amp-support/1/videojs-amp-support.js</code></pre>
    </section>
    <section class="bcls-section">
        <h2 id="HTML_page_code_examination">Prüfung des HTML-Seiten</h2>
        <p>Der HTML-Seitencode aus dem obigen CodePen-Beispiel ist unten dargestellt (der Plugin-Code wird im nächsten Abschnitt beschrieben). Eine vollständige Erklärung des Codes wird von AMP in den oben verlinkten Dokumenten bereitgestellt. In der folgenden Liste sind ein paar Tricks/Fallen zu beachten:</p>
        <ul>
            <li>Zeile 14: Sie können ein einzelnes <code translate="No">style</code> Tag hinzufügen, es muss jedoch das <code translate="No">amp-custom</code> Attribut enthalten.</li>
            <li>Zeile 26: Verschönern Sie den Code NICHT. Das Boilerplate CSS wird wie von AMP geliefert benötigt.</li>
            <li>Zeile 42: Die URL zum externen Video wird hier weitergegeben. Denken Sie daran, dass der Name lautet, da der Name von der <code translate="No">src</code> URL eines Iframes abgerufen wird <code translate="No">videoUrl</code>.</li>
            <li>Zeile 43: Der <code translate="No">data-video-id</code> muss vorhanden sein, wird aber bei Verwendung eines externen Videos kein Wert zugewiesen.</li>
            <li>Zeile 44: Die <code translate="No">width</code> und <code translate="No">height</code> Attribute bestimmen das Seitenverhältnis des Players, der in responsive Layouts eingebettet ist.</li>
        </ul>
        <pre class="line-numbers" data-start="1">
  <code class="language-html" translate="No">&lt;!--
    ## Introduction
  
    The `amp-brightcove` component allows embedding a Brightcove
    [Video Cloud](https://www.brightcove.com/en/online-video-platform) or
    [Perform](https://www.brightcove.com/en/perform) player.
  --&gt;
  &lt;!-- --&gt;
  &lt;!doctype html&gt;
  &lt;html ⚡&gt;
  &lt;head&gt;
    &lt;meta charset="utf-8"&gt;
    &lt;title&gt;amp-brightcove&lt;/title&gt;
    &lt;style amp-custom&gt;
      .player-container {
        width: 640px;
        height: 360px;
      }
    &lt;/style&gt;
    &lt;script async src="https://cdn.ampproject.org/v0.js"&gt;&lt;/script&gt;
    &lt;!-- ## Setup --&gt;
    &lt;!-- Import the Brightcove component in the header. --&gt;
    &lt;script async custom-element="amp-brightcove" src="https://cdn.ampproject.org/v0/amp-brightcove-0.1.js"&gt;&lt;/script&gt;
    &lt;meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"&gt;
    &lt;link rel="canonical" href="https://ampbyexample.com/components/amp-brightcove/"&gt;
    &lt;style amp-boilerplate&gt;body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}&lt;/style&gt;&lt;noscript&gt;&lt;style amp-boilerplate&gt;body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}&lt;/style&gt;&lt;/noscript&gt;
  
  
  &lt;/head&gt;
  &lt;body&gt;
  
    &lt;!-- ## Basic Usage --&gt;
    &lt;!--
      A responsive brightcove video. The required data is `data-account` and `data-video-id`. Other
      supported parameters are `data-player-id`, `data-embed` and `data-playlist-id`.
    --&gt;
    &lt;div class="player-container"&gt;
      &lt;amp-brightcove
        data-account="3676484087001"
        data-player-id="ByrhJWAPf"
        layout="responsive"
        data-param-video-url="//solutions.brightcove.com/bcls/videos/calm-day-oregon-coast.mp4"
        data-video-id
        width="16" height="9"&gt;
      &lt;/amp-brightcove&gt;
    &lt;/div&gt;
  
  
  &lt;/body&gt;
  &lt;/html&gt;</code></pre>
    </section>
    <section class="bcls-section">
        <h2 id="Plugin_code_examination">Plugin-Code-Untersuchung</h2>
        <p>Die Funktionsweise von AMP besteht darin, dass die <code translate="No">amp-brightcove</code> Komponente eine Iframe-Implementierung des Brightcove Players erstellt. In der URL für den Iframe wird das benutzerdefinierte Attribut angezeigt, wie hier gezeigt:</p>
        <pre class="line-numbers">
  <code class="language-html" translate="No">&lt;iframe frameborder="0" allowfullscreen="true" src="https://players.brightcove.net/3676484087001/ByrhJWAPf_default/index.html?<span class="bcls-highlight">videoUrl=%2F%2Fsolutions.brightcove.com%2Fbcls%2Fvideos%2Fcalm-day-oregon-coast.mp4"</span>; class="i-amphtml-fill-content" kwframeid="1"&gt;&lt;/iframe&gt;</code></pre>
        <p>Wenn Sie im Iframe-Code scrollen, sehen Sie die hier gezeigte Abfragezeichenfolge:</p>
        <figure class="bcls-figure"><img class="bcls-image" alt="AMP iframe source" src="/assets/images/amp/amp-external-amp-url.png" /></figure>
        <p>Beachten Sie, dass der Name der Abfragezeichenfolge lautet <code translate="No">videoUrl</code> Beachten Sie auch, dass die URL URL-codiert wurde. Beide Probleme werden sich im hier gezeigten Plugin-Code widerspiegeln:</p>
        <ul>
            <li>Zeilen 21-38: Eine Hilfsfunktion, die den mit einer Abfragezeichenfolge verknüpften Wert findet, der als Parameter an die Funktion übergeben wird.</li>
            <li>Zeile 7: Rufen Sie den Wert der <code translate="No">videoUrl</code> Abfragezeichenfolge mit der Hilfsfunktion ab.</li>
            <li>Zeile 8: Verwenden Sie die <code translate="No">decodeURIComponent()</code> Methode von JavaScript, um eine gültige URL für das Video zu erhalten.</li>
            <li>Zeilen 11-14: Verwenden Sie die dekodierte URL und platzieren Sie das Video im Player. Wenn Sie andere Videoformate als MP4 verwenden, müssen Sie entweder den richtigen <code translate="No">type</code> Wert übergeben oder Logik schreiben, um die Erweiterung des Videos zu lesen und den richtigen Wert zuzuweisen.</li>
            <li>Zeilen 17-19: Natürlich nicht erforderlich, aber wenn Sie möchten, dass das Video beim Start abgespielt wird, können Sie diesen Code verwenden.</li>
        </ul>
        <pre class="line-numbers">
  <code class="language-javascript" translate="No">videojs.registerPlugin('ampPassVideo', function() {
    var myPlayer = this,
      encodedVideoQueryParam,
      decodedVideoQueryParam;
  
    // Get the query string and un-URL encode it
    encodedVideoQueryParam = getQuerystring('videoUrl');
    decodedVideoQueryParam = decodeURIComponent(encodedVideoQueryParam);
  
    // Load the video into the player
    myPlayer.src({
      'type': 'video/mp4',
      'src': decodedVideoQueryParam
    });
  
    // On loadedmetadata event, play the video
    myPlayer.on('loadedmetadata', function(){
      myPlayer.play();
    });
  
    /*
     * usage: foo = getQuerystring("bctid", null);
     * foo will be equal to value of query param bctid
     * note that the default_ parameter is what you will get back
     * if the key isn’t found
     */
    function getQuerystring(key, default_) {
      var regex, qs;
      if (default_ == null) default_ = "";
      key = key.replace(/[\[]/, "\\\[").replace(/[\]]/, "\\\]");
      regex = new RegExp("[\\?&amp;]" + key + "=([^&amp;#]*)");
      qs = regex.exec(window.location.href);
      if (qs === null) {
        return default_;
      } else {
        return qs[1];
      }
    }
  });</code></pre>
        <p>Sie würden dieses Plugin Ihrem Player entweder mit <a href="https://studio.support.brightcove.com/players/configuring-player-plugins.html">Studio</a> oder der Player-Management-API zuweisen.</p>
    </section>
    <section class="bcls-section">
        <h2 id="Features">Funktionen</h2>
        <p>Obwohl in der AMP-Dokumentation diskutiert, werden hier einige Funktionen hervorgehoben, die von besonderer Bedeutung sind:</p>
        <!-- These are features that are common to both Video Cloud and external videos -->
        <!-- THIS SECTION CAN BE ADDED TO THEN COPIED TO SIMILAR SECTION IN Video Cloud VIDEO FEATURES SECTION -->

        <h3>Benutzerdefinierte Parameter</h3>
        <p>Möglicherweise möchten Sie zusätzliche Informationen an Ihren Player weitergeben, damit Ihre Plugins zugreifen können. Sie können dies tun, indem Sie zusätzliche Attribute für das <code translate="No">amp-brightcove</code> Element hinzufügen, das benannt werden muss <code translate="No">data-param-*</code>, wo <code translate="No">*</code> ist der Name Ihrer Immobilie.</p>
        <p>Die Parameter werden als Attributnamen mit Kamelhüllen übergeben, die an die Spieler-URL angehängt sind. Schlüssel und Werte sind URL-codiert. Zum Beispiel:</p>
        <ul>
            <li><code translate="No">data-param-language="de"</code> wird <code translate="No">&amp;language=de</code></li>
            <li><code translate="No">data-param-ad-vars="key:val;key2:val2"</code> wird <code translate="No">&amp;adVars=key%3Aval%3Bkey2%3Aval2</code></li>
        </ul>
        <h3>Unterstützung für externe Referrer</h3>
        <p>Brightcove Player v6.25.0+ unterstützt das Festlegen eines beliebigen Referrers für einen Iframe. Die AMP-Komponente unterstützt jetzt das Durchlaufen eines eigenen Referrers an den Player, indem sie ein <code translate="No">referrer="EXTERNAL_REFERRER"</code> Attribut hinzufügt, das ihr amp-brightcove einbettet.</p>
        <p>EXTERNAL_REFERRER ist AMPs eigenes Makro - siehe <a href="https://github.com/ampproject/amphtml/blob/19135a3aac7813a9ff263a9f863fe35aeb316582/spec/amp-var-substitutions.md#external-referrer">https://github.com/ampproject/amphtml/blob/19135a3aac7813a9ff263a9f863fe35aeb316582/spec/amp-var-substitutions.md#external-referrer</a> Für weitere Informationen.</p>
        <h3>AMP-Analytik</h3>
        <p>Eine <strong></strong> Amp-Analytics-Komponente kann in einem AMP-Dokument verwendet werden, um Daten zu beliebigen Analysen zu verfolgen. Wenn Publisher Videoereignisse einbeziehen möchten, können sie dies jetzt tun.</p>
        <p>Das Dokument von AMP zur AMP Analytics-Syntax (was umständlich ist) ist hier: <a href="https://www.ampproject.org/docs/reference/components/amp-analytics">https://www.ampproject.org/docs/reference/components/amp-analytics</a>. Und insbesondere Videoanalysen: <a href="https://github.com/ampproject/amphtml/blob/master/extensions/amp-analytics/amp-video-analytics.md">https://github.com/ampproject/amphtml/blob/master/extensions/amp-analytics/amp-video-analytics.md</a>.</p>
        <p>Ein Beispiel ist verfügbar, das auf <strong>example.com verfolgt wird,</strong> sodass Sie die Beacons als Fehler auf der Registerkarte „Netzwerk“ sehen: <a href="http://solutions.brightcove.com/bclifford/ampexamples/analytics.html">http://solutions.brightcove.com/bclifford/ampexamples/analytics.html</a>.</p>
        <h3>AMP Binden</h3>
        <p>AMP Bind ist die API von AMP für die Interaktion zwischen Komponenten. Auf einer grundlegenden Ebene können Sie etwas außerhalb des Players haben, um die Wiedergabe zu steuern. Zum Beispiel würde der folgende Code ein Video abspielen, wo <code translate="No">myPlayer</code> sich <code translate="No">id</code> der Amp-Brightcove Player befindet.</p>
        <pre class="line-numbers">
    <code class="language-html" translate="No">&lt;button on="tap:myPlayer.play"&gt;Play&lt;/button&gt;</code></pre>
        <p>AMP vertraut Videoereignissen nicht, sodass Sie derzeit nichts Nützlicheres tun können, wie zum Beispiel auf einem Videoende zu handeln. Ein Beispiel dafür ist hier verfügbar: <a href="http://solutions.brightcove.com/bclifford/ampexamples/bind.html">http://solutions.brightcove.com/bclifford/ampexamples/bind.html</a>.</p>
    </section>
</article>