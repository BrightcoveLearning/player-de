---
title: 'Beispiel für Brightcove Spieler: Forward Scrubbing deaktivieren'
description: 'In diesem Thema erfahren Sie, wie Sie eine Middleware-Funktion verwenden, um das Forward-Scrubbing zu deaktivieren, bis ein bestimmter Prozentsatz des Videos abgespielt wurde.'
parent: Code Samples
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>

  <section class="bcls-section">
    <h2 id="Player_example">Beispiel eines Spielers</h2>
    <!-- UPDATE description -->
    
    <aside class="bcls-aside bcls-aside--information">Dieses Beispiel und der zugehörige Code werden als Leitfaden für Ihre Produktionsentwicklung bereitgestellt. Der Code ist weder für die Verwendung in der Produktion zertifiziert noch offiziell unterstützt.</aside>
    <p>Anfangs können Sie NICHT vorwärts schrubben, aber es ist möglich, rückwärts zu schrubben. Sobald das Video 50% abgespielt hat, können Sie entweder vorwärts oder rückwärts schrubben. Der Prozentsatz, wann das Vorwärts-Scrubbing erlaubt werden soll, ist im Code einfach festgelegt.</p>
    <!-- UPDATE codepen here -->
    
    <p data-height="452" data-theme-id="34967" data-slug-hash="OvzyMN" data-default-tab="result" data-user="rcrooks1969" data-embed-version="2" data-pen-title="Disable Forward Scrubbing" class="codepen">Siehe den Stift <a href="https://codepen.io/team/rcrooks1969/pen/OvzyMN/">Deaktivieren Sie Forward Scrubbing</a> von Brightcove Learning Services (<a href="https://codepen.io/rcrooks1969">@rcrooks1969</a>) auf <a href="https://codepen.io">CodePen</a>.</p>
    <script async src="https://static.codepen.io/assets/embed/ei.js"></script><!-- UPDATE link to GitHub source -->
    
    <h3>Quellcode</h3>
          <p>Sehen Sie sich die <a href="https://github.com/BrightcoveLearning/18571-disable-forward-scrubbing">Komplettlösung auf GitHub an</a>.</p>
  </section>
  <section class="bcls-section">
    <details>
      <summary><h2 id="Using_the_CodePen">CodePen verwenden</h2></summary>
      <p>Hier sind einige Tipps zur effektiven Verwendung des obigen CodePen:</p>
      <ul>
        <li>Schalten Sie die tatsächliche Anzeige des Spielers um, indem Sie auf die</strong> Schaltfläche <strong translate="No">Ergebnis klicken.</li>
        <li>Klicken Sie auf die</strong> Schaltflächen <strong translate="No">HTML/CSS/JS, um EINEN der Codetypen anzuzeigen.</li>
        <li>Später in diesem Dokument werden die Logik, der Ablauf und das Styling der Anwendung in der <a href="#Player/HTML_configuration">Player/HTML-Konfiguration</a>, im <a href="#Application_flow">Anwendungsfluss</a> und im <a href="#Application_styling">Anwendungsstyling diskutiert</a> Abschnitte. Der beste Weg, um den Informationen in diesen Abschnitten zu folgen, besteht darin:
          <ol>
            <li>Klicken Sie im CodePen auf die</strong> Schaltfläche <strong translate="No">EDIT ON CODEPEN und halten Sie den Code in einem Browser-/Browser-Tab zur Verfügung.</li>
            <li>Passen Sie in CodePen an, welcher Code angezeigt werden soll. Sie können die Breite verschiedener CodeAbschnitte in CodePen ändern.</li>
            <li>Zeigen Sie die</a> Abschnitte <a href="#Player/HTML_configuration">Player/HTML-Konfiguration</a>, <a href="#Application_flow">Anwendungsfluss</a> und/oder <a href="#Application_styling">Anwendungs-Styling in einer anderen Browser-/Browser-Registerkarte an. Sie können nun den Codeerklärungen folgen und gleichzeitig den Code anzeigen.</li>
          </ol>
        </li>
      </ul>
    </details>
  </section>
  
  <section class="bcls-section">
    <h2 id="Middleware_functions">Middleware-Funktionen</h2>
    <p>Dieses Beispiel verwendet die Middleware Video.js, um die Codelösung zu implementieren. Auf einem sehr hohen Niveau sind die Anwendungsfälle, in denen Middleware am meisten Wert ist, wenn Sie das Kernverhalten des Players abfangen und ändern möchten, z. B. das Festlegen der Quelle oder der aktuellen Uhrzeit. Video.js Middleware wird in diesem Dokument im Allgemeinen nicht ausführlich diskutiert, aber der tatsächliche Code, der für die Middleware-Funktion verwendet wird, wird erklärt. Hier sind Dokumente aus Video.js Quellen, die Middleware detailliert beschreiben:</p>
    <ul>
      <li><a href="http://docs.videojs.com/tutorial-middleware.html">Middleware (aus dem Dokumentationssatz Video.js)</a></li>
      <li><a href="http://blog.videojs.com/feature-spotlight-middleware/">Feature-Spotlight: Middleware (aus dem Blog Video.js)</a></li>
      <li><a href="https://github.com/videojs/videojs-playbackrate-adjuster">videojs-playbackrate-Adjuster (eine Beispiel-App)</a></li>
    </ul>
    <h3>Implementierung von Middleware-Funktionen mit Brightcove Player</h3>
    <p>Die einfachste Möglichkeit, eine Middleware-Funktion zu verwenden, besteht darin:</p>
    <ol>
      <li>Schreiben Sie die Middleware-Funktion.</li>
      <li>Platzieren Sie die Middleware-Funktion entweder auf der Seite mit dem Player in einem <code translate="No">script</code> Tag oder schließen Sie die Middleware-Funktion mit dem <code translate="No">src</code> Attribut mit einem <code translate="No">script</code> markieren. Beide Implementierungen werden in diesem Dokument angezeigt.</li>
      <li>Registrieren Sie die Middleware-Funktion mit der <code translate="No">use()</code> Methode beim Player, wie hier gezeigt:
        <pre class="line-numbers">
<code class="language-javascript" translate="No">videojs.use('mimeType', functionName);</code></pre>
        <p>Für die <strong>Mime Typ</strong> Sie können einen Standard-Video-Mimetyp verwenden, wie <strong>Video/mp4</strong> , oder verwenden Sie ein <strong>*</strong> wenn Sie möchten, dass die Middleware-Funktion auf alle Mimetypen angewendet wird.</p>
      </li>
    </ol>
  </section>
  <!-- UPDATE player and HTML configuration -->
  
  <section class="bcls-section">
    <h2 id="Player/HTML_configuration">Player-/HTML-Konfiguration</h2>
    <p>Dieser Abschnitt beschreibt jede spezielle Konfiguration, die während der Spielererstellung erforderlich ist. Darüber hinaus werden andere HTML-Elemente beschrieben, die der Seite über den In-Page-Einbettungsplayer-Implementierungscode hinaus hinzugefügt werden müssen.</p>
    <h3>Player-Konfiguration</h3>
    <p>Für den Brightcove Player, den Sie für dieses Beispiel erstellen, ist keine spezielle Konfiguration erforderlich.</p>
    <h3>Anderes HTML</h3>
    <p>Der Seite werden keine anderen HTML-Elemente hinzugefügt.</p>
  </section>
  <!-- UPDATE application flow -->
  
  <section class="bcls-section">
    <h2 id="Application_flow">Ablauf der Anwendung</h2>
    <p>Die grundlegende Logik hinter dieser Anwendung lautet:</p>
    <ul>
      <li>Implementieren Sie die grundlegende Syntax für eine Middleware-Funktion und benennen Sie die Funktion <code translate="No">disableForwardScrubbing</code>.</li>
      <li>Implementieren Sie die erforderliche <code translate="No">setSource()</code> Methode.</li>
      <li>Ändern Sie die <code translate="No">setCurrentTime()</code> Methode, um zu überprüfen, ob die Zeit, zu der der Betrachter zu schrubben versucht, geringer ist als die aktuelle Zeit im Spieler oder der Prozentsatz des Scrub Forward abgelaufen ist. Wenn beides stimmt, verschieben Sie den Abspielkopf auf diese Zeit. Wenn falsch, lassen Sie das Video zum aktuellen Zeitpunkt abspielen.</li>
    </ul>
    <!-- UPDATE task 1 -->
    
    <h3>Erstellen Sie das Skelett für die Middleware-Funktion</h3>
    <p>Finden Sie den Code, der mit der Bezeichnung versehen ist:</p>
    <pre>
<code class="language-javascript" translate="No">// +++ Define the middleware function+++</code></pre>
    <p>Die grundlegende Syntax zum Erstellen einer Middleware-Funktion lautet wie folgt:</p>
    <pre class="line-numbers">
<code class="language-javascript" translate="No">var disableForwardScrubbing = function(player) {
  return {
  ...
};</code></pre>
    <p>Beachten Sie, dass das <code translate="No">player</code> Objekt an die Funktion übergeben wird.</p>
    <!-- UPDATE task 2 -->
    
    <h3>Implementieren Sie die <code translate="No">setSource()</code> Methode</h3>
    <p>Finden Sie den Code, der mit der Bezeichnung versehen ist:</p>
    <pre>
<code class="language-javascript" translate="No">// ### Implement setSource() ###</code></pre>
    <p>Dies ist eine erforderliche Methode für jede Middleware-Funktion. Durch die Verwendung der gezeigten Syntax wird die Middleware unabhängig vom Videotyp immer ausgewählt:</p>
    <pre class="line-numbers">
<code class="language-javascript" translate="No">setSource: function setSource(srcObj, next) {
  next(null, srcObj);
},</code></pre>
    <!-- UPDATE task 3 -->
    
    <h3>Ändern Sie die setCurrentTime () -Methode</h3>
    <p>Finden Sie den Code, der mit der Bezeichnung versehen ist:</p>
    <pre>
<code class="language-javascript" translate="No">// ### Alter the setCurrentTime method ###</code></pre>
    <p>In diesem Codeblock wird die eigentliche <code translate="No">setCurrentTime()</code> Methode geändert. Um dies zu verstehen, ist der erste zu wissen, dass der an die Funktion übergebene <code translate="No">ct</code> Wert den Wert widerspiegelt, auf den der Betrachter schrubbt. Die <code translate="No">if</code> Anweisung prüft, ob der neue Wert kleiner als die aktuelle Uhrzeit des Spielers ist oder den Prozentsatz überschreitet, um das Vorwärts-Scrubbing zu ermöglichen. Wenn einer der Wert true ist, wird der neue Wert zurückgegeben, wodurch der Abspielkopf auf den neuen Wert verschoben wird. Wenn die Bedingung falsch ist, was bedeutet, dass der Betrachter versucht, vorwärts zu schrubben, bevor er erlaubt wird, wird die aktuelle Uhrzeit des Spielers zurückgegeben und die Wiedergabe wird nicht geändert.</p>
    <pre class="line-numbers">
<code class="language-javascript" translate="No">setCurrentTime: function setCurrentTime(ct) {
  var percentAllowForward = 50,
   // Determine percentage of video played
   percentPlayed = player.currentTime() / player.duration() * 100;
   // Check if the time scrubbed to is less than the current time
   // or if passed scrub forward percentage
  if ( ct &lt; player.currentTime() || percentPlayed &gt; percentAllowForward ) {
    // If true, move playhead to desired time
    return ct;
  }
  // If time scrubbed to is past current time and not passed percentage
  // leave playhead at current time
  return player.currentTime();
}</code></pre>
  </section>
  <!-- UPDATE CSS description -->
  
  <section class="bcls-section">
    <h2 id="Application_styling">Styling der Anwendung</h2>
    <p>Das CSS auf der Seite legt einfach die Größe des Players fest.</p>
  </section>
  <section class="bcls-section">
    <h2 id="Using_the_middleware_function">Verwenden der Middleware-Funktion</h2>
    <p>Sobald die Middleware-Funktion geschrieben wurde, möchten Sie sie verwenden. Zwei Wege wurden bereits erwähnt und werden jetzt detailliert beschrieben.</p>
    <h3>Code auf derselben Seite wie Spieler</h3>
    <p>Hier definierst du die Middleware-Funktion auf derselben Seite wie der Player und registrierst sie dann.</p>
    <pre class="line-numbers">
<code class="language-html" translate="No">&lt;video-js id="myPlayerID"
  data-video-id="5701202551001"
  data-account="1752604059001"
  data-player="default"
  data-embed="default"
  data-application-id
  class="video-js"
  controls&gt;&lt;/video-js&gt;
&lt;script src="https://players.brightcove.net/1752604059001/default_default/index.min.js"&gt;&lt;/script&gt;

<span class="bcls-highlight">&lt;script type="text/javascript"&gt;
  // +++ Define the middleware function+++
  var disableForwardScrubbing = function(player) {
    return {
      // +++ Implement setSource() +++
      setSource: function setSource(srcObj, next) {
        next(null, srcObj);
      },
      // +++ Alter the setCurrentTime method +++
      setCurrentTime: function setCurrentTime(ct) {
        var percentAllowForward = 50,
         // Determine percentage of video played
         percentPlayed = player.currentTime() / player.duration() * 100;
         // Check if the time scrubbed to is less than the current time
         // or if passed scrub forward percentage
        if ( ct &lt; player.currentTime() || percentPlayed &gt; percentAllowForward ) {
          // If true, move playhead to desired time
          return ct;
        }
        // If time scrubbed to is past current time and not passed percentage
        // leave playhead at current time
        return player.currentTime();
      }
    }
  };

  // Register the middleware with the player
  videojs.use('*', disableForwardScrubbing);</span>

&lt;/script&gt;</code></pre>
    <h3>Code auf Spielerseite enthalten</h3>
    <p>Im folgenden Code sind das JavaScript für die Middleware-Funktion und die <code translate="No">use()</code> Methode zur Registrierung einfach auf der Seite enthalten.</p>
    <pre class="line-numbers">
<code class="language-html" translate="No">&lt;video-js id="myPlayerID"
  data-video-id="5701202551001"
  data-account="1752604059001"
  data-player="default"
  data-embed="default"
  data-application-id
  class="video-js"
  controls&gt;&lt;/video-js&gt;
&lt;script src="https://players.brightcove.net/1752604059001/default_default/index.min.js"&gt;&lt;/script&gt;

<span class="bcls-highlight">&lt;script src="disable-forward-scrubbing.js"&gt;&lt;/script&gt;</span></code></pre>
    <p>Den vollständigen Code finden Sie im</a> Abschnitt <a href="https://github.com/BrightcoveLearning/18571-disable-forward-scrubbing/tree/master/function-in-separate-file">Funktion in separate-file im GitHub-Repo.</p>
  </section>
</article>