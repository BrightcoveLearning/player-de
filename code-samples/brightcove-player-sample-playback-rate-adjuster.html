---
title: 'Beispiel für Brightcove Spieler: Wiedergabe-Rate Adjuster'
description: 'In diesem Thema erfahren Sie, wie Sie der Brightcove Player-Kontrollleiste eine Wiedergaberate hinzufügen und mithilfe der Middleware die aktuelle Uhrzeit und die Videodauer korrekt anzeigen, während Sie zwischen den Wiedergabegeschwindigkeiten wechseln.'
parent: Code Samples
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>

  <section class="bcls-section">
    <h2 id="Player_example">Beispiel eines Spielers</h2>
    <!-- UPDATE description -->
    
    <aside class="bcls-aside bcls-aside--information">Dieses Beispiel und der zugehörige Code werden als Leitfaden für Ihre Produktionsentwicklung bereitgestellt. Der Code ist weder für die Verwendung in der Produktion zertifiziert noch offiziell unterstützt.</aside>
    <p>Starten Sie die Videowiedergabe und wählen Sie in der Steuerleiste die Wiedergaberate aus (der Standardwert ist 1x). Wählen Sie eine andere Rate aus, um zu sehen, wie sich die Videowiedergabegeschwindigkeit ändert. Beachten Sie, dass beim Ändern der Wiedergaberate die angezeigte Dauer basierend auf der ausgewählten Rate neu berechnet wird.</p>
    <!-- <aside class="bcls-aside bcls-aside--tip">If you don't want to code the middleware functions, you can use a plug and play solution. For details, see the  <a href="#Code_in_a_separate_JavaScript_file">Code in a separate JavaScript file</a> section.</aside> --><!-- UPDATE codepen here -->
    
    <p data-height="490" data-theme-id="34967" data-slug-hash="aGEVYZ" data-default-tab="result" data-user="bcls1969" data-embed-version="2" data-pen-title="Playback Rate Adjuster" class="codepen">Siehe den <a href="https://codepen.io/team/bcls1969/pen/aGEVYZ/">Stift-Wiedergaberate</a> von Brightcove Learning Services (<a href="https://codepen.io/team/rcrooks1969">@bcls1969</a>) auf <a href="https://codepen.io">CodePen</a>.</p>
    <script async src="https://static.codepen.io/assets/embed/ei.js"></script><!-- UPDATE link to GitHub source -->
    
    <h3>Quellcode</h3>
          <p>Sehen Sie sich die <a href="https://github.com/BrightcoveLearning/18597-playback-rate-adjuster">Komplettlösung auf GitHub an</a>.</p>
  </section>
  <section class="bcls-section">
    <details>
      <summary><h2 id="Using_the_CodePen">CodePen verwenden</h2></summary>
      <p>Hier sind einige Tipps zur effektiven Verwendung des obigen CodePen:</p>
      <ul>
        <li>Schalten Sie die tatsächliche Anzeige des Spielers um, indem Sie auf die</strong> Schaltfläche <strong translate="No">Ergebnis klicken.</li>
        <li>Klicken Sie auf die</strong> Schaltflächen <strong translate="No">HTML/CSS/JS, um EINEN der Codetypen anzuzeigen.</li>
        <li>Später in diesem Dokument werden die Logik, der Ablauf und das Styling der Anwendung in der <a href="#Player/HTML_configuration">Player/HTML-Konfiguration</a>, im <a href="#Application_flow">Anwendungsfluss</a> und im <a href="#Application_styling">Anwendungsstyling diskutiert</a> Abschnitte. Der beste Weg, um den Informationen in diesen Abschnitten zu folgen, besteht darin:
          <ol>
            <li>Klicken Sie im CodePen auf die</strong> Schaltfläche <strong translate="No">EDIT ON CODEPEN und halten Sie den Code in einem Browser-/Browser-Tab zur Verfügung.</li>
            <li>Passen Sie in CodePen an, welcher Code angezeigt werden soll. Sie können die Breite verschiedener CodeAbschnitte in CodePen ändern.</li>
            <li>Zeigen Sie die</a> Abschnitte <a href="#Player/HTML_configuration">Player/HTML-Konfiguration</a>, <a href="#Application_flow">Anwendungsfluss</a> und/oder <a href="#Application_styling">Anwendungs-Styling in einer anderen Browser-/Browser-Registerkarte an. Sie können nun den Codeerklärungen folgen und gleichzeitig den Code anzeigen.</li>
          </ol>
        </li>
      </ul>
    </details>
  </section>
  <section class="bcls-section">
    <details>
      <summary><h2 id="Development_sequence">Entwicklungs-Sequenz</h2></summary> 
      <p>Hier ist die empfohlene Entwicklungssequenz:</p>
      <ol>
        <li>Verwenden Sie die In-Page-Embed-Player-Implementierung, um die Funktionalität Ihres Players, Plugins und CSS zu testen (falls CSS benötigt wird)</li>
        <li>Legen Sie JavaScript und CSS des Plugins in separate Dateien zum lokalen Testen</li>
        <li>Stellen Sie den Plugin-Code und das CSS auf Ihrem Server bereit, sobald Sie Fehler herausgefunden haben</li>
        <li>Benutze Studio, um das Plugin und das CSS deinem Player hinzuzufügen</li>
        <li>Ersetzen Sie die In-Page-Embed-Player-Implementierung, wenn Sie feststellen, dass die Iframe-Implementierung besser passt (im nächsten Abschnitt beschrieben)</li>
      </ol>
      <p>Weitere Informationen zu diesen Schritten finden Sie in der <a href="/coding-topics/step-step-plugin-development.html">Schritt-für-Schritt-Anleitung: </a> Leitfaden zur Entwicklung von Plugins</p>
      <h3>iframe oder In-Page einbetten</h3>
      <p>Bei der Entwicklung von Verbesserungen für den Brightcove Player müssen Sie entscheiden, ob der Code am besten für die Iframe- oder In-Page-Einbettungsimplementierung geeignet ist. Die Best Practice-Empfehlung besteht darin, ein Plugin zur Verwendung mit einer Iframe-Implementierung zu erstellen. Die Vorteile der Verwendung des iFrame-Players sind:</p>
      <ul>
        <li>Keine Kollisionen mit vorhandenem JavaScript und/oder CSS</li>
        <li>Reaktionsschnell</li>
        <li>Der iframe erleichtert die Verwendung in Social-Media-Apps (oder wann immer das Video in andere Apps „reisen“ muss)</li>
      </ul>
      <p>Obwohl die Integration des In-Page-Einbettungsplayers komplexer sein kann, planen Sie Ihren Code in dieser Implementierung manchmal. Um zu verallgemeinern, ist dieser Ansatz am besten, wenn die enthaltende Seite mit dem Spieler kommunizieren muss. Im Einzelnen sind hier einige Beispiele:</p>
      <ul>
        <li>Der Code auf der enthaltenden Seite muss Spielerereignisse abhören und darauf reagieren</li>
        <li>Der Player verwendet Stile von der enthaltenden Seite</li>
        <li>Der Iframe führt dazu, dass die App-Logik fehlschlägt, wie eine Weiterleitung von der enthaltenen Seite</li>
      </ul>
      <p>Selbst wenn Ihre endgültige Implementierung den Iframe-Code nicht verwendet, können Sie den In-Page-Einbettungscode trotzdem mit einem Plugin für Ihr JavaScript und einer separaten Datei für Ihr CSS verwenden. Dies kapselt Ihre Logik, sodass Sie sie problemlos in mehreren Spielern verwenden können.</p>
    </details>
  </section>
  <section class="bcls-section">
    <h2 id="Middleware_functions">Middleware-Funktionen</h2>
    <p>Dieses Beispiel verwendet die Middleware Video.js, um die Codelösung zu implementieren. Auf einem sehr hohen Niveau sind die Anwendungsfälle, in denen Middleware am meisten Wert ist, wenn Sie das Kernverhalten des Players abfangen und ändern möchten, z. B. das Festlegen der Quelle oder der aktuellen Uhrzeit. Video.js Middleware wird in diesem Dokument im Allgemeinen nicht ausführlich diskutiert, aber der tatsächliche Code, der für die Middleware-Funktion verwendet wird, wird erklärt. Hier sind Dokumente aus Video.js Quellen, die Middleware detailliert beschreiben:</p>
    <ul>
      <li><a href="http://docs.videojs.com/tutorial-middleware.html">Middleware (aus dem Dokumentationssatz Video.js)</a></li>
      <li><a href="http://blog.videojs.com/feature-spotlight-middleware/">Feature-Spotlight: Middleware (aus dem Blog Video.js)</a></li>
      <li><a href="https://github.com/videojs/videojs-playbackrate-adjuster">videojs-playbackrate-Adjuster (eine Beispiel-App)</a></li>
    </ul>
    <h3>Implementierung von Middleware-Funktionen mit Brightcove Player</h3>
    <p>Die einfachste Möglichkeit, eine Middleware-Funktion zu verwenden, besteht darin:</p>
    <ol class="bcls-tasklist__restart">
      <li>Schreiben Sie die Middleware-Funktion.</li>
      <li>Platzieren Sie die Middleware-Funktion entweder auf der Seite mit dem Player in einem <code translate="No">script</code> Tag oder schließen Sie die Middleware-Funktion mit dem <code translate="No">src</code> Attribut mit einem <code translate="No">script</code> markieren. Beide Implementierungen werden in diesem Dokument angezeigt.</li>
      <li>Registrieren Sie die Middleware-Funktion mit der <code translate="No">use()</code> Methode beim Player, wie hier gezeigt:
        <pre class="line-numbers">
<code class="language-javascript" translate="No">videojs.use('mimeType', functionName);</code></pre>
        <p>Für den <strong>Mimetyp können</strong> Sie einen Standard-Video-Mimetyp wie <strong>Video/MP4 verwenden oder ein <strong> verwenden</strong>,</strong> wenn Sie möchten, dass die Middleware-Funktion auf alle einwirkt Mimetypen.</p>
        <aside class="bcls-aside bcls-aside--tip">Plugins und Middleware können so eingerichtet werden, dass sie sich automatisch registrieren, wenn ihre Skripte enthalten sind. In diesem Fall müssten Sie die <code translate="No">videojs.use()</code> Methode nicht verwenden.</aside>
      </li>
    </ol>
  </section>
  <section class="bcls-section">
    <h2 id="API/Plugin_resources_used">Verwendete API/Plugin-Ressourcen</h2>
    <!-- UPDATE table, remove unneeded columns -->
    
    <table class="bcls-table">
      <thead class="bcls-table__head">
        <tr>
          <th>API-Klassen</th>
          <th>API-Methoden</th>
        </tr>
      </thead>
      <tbody class="bcls-table__body">
        <tr>
          <td><a href="https://docs.brightcove.com/brightcove-player/current-release/ControlBar.html">ControlBar</a></td>
          <td><a href="https://docs.brightcove.com/brightcove-player/current-release/ControlBar.html#addChild">controlBar.addChild ()</a></td>
        </tr>
        <tr>
          <td><a href="https://docs.brightcove.com/brightcove-player/current-release/PlaybackRateMenuButton.html">playbackRateMenuButton</a></td>
          <td>&nbsp;</td>
        </tr>
      </tbody>
    </table>
  </section>
  <!-- UPDATE player and HTML configuration -->
  
  <section class="bcls-section">
    <h2 id="Player/HTML_configuration">Player-/HTML-Konfiguration</h2>
    <p>Dieser Abschnitt beschreibt jede spezielle Konfiguration, die während der Spielererstellung erforderlich ist. Darüber hinaus werden andere HTML-Elemente beschrieben, die der Seite über den In-Page-Einbettungsplayer-Implementierungscode hinaus hinzugefügt werden müssen.</p>
    <h3>Player-Konfiguration</h3>
    <p>Für den Brightcove Player, den Sie für dieses Beispiel erstellen, ist keine spezielle Konfiguration erforderlich.</p>
    <h3>Anderes HTML</h3>
    <p>Denken Sie daran, das <code translate="No">id</code> Attribut dem <code translate="No">video</code> Tag im Einbettungscode des Spielers hinzuzufügen.</p>
    <pre>
<code class="language-html" translate="No">&lt;video-js <span class="bcls-highlight">id="myPlayerID"</span>
...</code></pre>
  </section>
  <!-- UPDATE application flow -->
  
  <section class="bcls-section">
    <h2 id="Application_flow">Ablauf der Anwendung</h2>
    <p>Die grundlegende Logik hinter dieser Anwendung lautet:</p>
    <ul>
      <li>Definieren Sie die Middleware-Funktionen</li>
      <li>Registriere die Middleware beim Player</li>
      <li>Definieren Sie die Optionen für die Wiedergaberate</li>
      <li>Initialisieren Sie die Wiedergaberate</li>
    </ul>
    <!-- UPDATE task 1 -->
    
    <h3>Definieren Sie die Middleware-Funktionen</h3>
    <p>Finden Sie den Code, der mit der Bezeichnung versehen ist:</p>
    <pre>
<code class="language-javascript" translate="No">// +++ Define the middleware functions +++</code></pre>
    <p>Erstellen Sie die folgenden Middleware-Funktionen:</p>
    <ol class="bcls-tasklist__restart">
      <li>Erstellen Sie eine unterstützende Middleware-Funktion, mit der die Start- und Endzeiten der Wiedergabe basierend auf der ausgewählten Wiedergaberate neu berechnet werden.</li>
      <li>
        <p>Erstellen Sie eine Middleware-Funktion, die die Startzeit, Dauer und sogar die aktuelle Uhrzeit bei der Suche aktualisiert.</p>
        <p>Die grundlegende Syntax zum Erstellen einer Middleware-Funktion lautet wie folgt:</p>
        <pre class="line-numbers">
<code class="language-javascript" translate="No">const playbackrateAdjuster = function(player) {
   return {
   ...
 };</code></pre>
        <p>Beachten Sie, dass das <code translate="No">player</code> Objekt an die Funktion übergeben wird.</p>
        <p>Diese Middleware-Funktion führt Folgendes aus:</p>
        <ol>
          <li><strong>Hören Sie sich das Ratechange-Event an</strong>: Wenn die Wiedergaberate geändert wird, lösen Sie die <code translate="No">timeupdate</code> Ereignisse <code translate="No">durationchange</code> und aus.</li>
          <br />
          <li><strong>Implementiere die setSource () -Methode</strong>: Dies ist eine erforderliche Methode für jede Middleware-Funktion. Durch die Verwendung der gezeigten Syntax wird die Middleware unabhängig vom Videotyp immer ausgewählt:
            <pre>
<code class="language-javascript" translate="No">setSource(srcObj, next) {
  next(null, srcObj);
},</code></pre>
          </li>
          <br />
          <li><strong>Überschreiben Sie Methoden mit der aktuellen Wiedergaberate</strong>: Überschreiben Sie die Methoden für <code translate="No">duration</code>, <code translate="No">currentTime</code>, <code translate="No">buffered</code>, <code translate="No">seekable</code> und <code translate="No">played</code> mit Werten, die mit der aktuellen Wiedergaberate berechnet wurden.</li>
        </ol>
      </li>
    </ol>
    <!-- UPDATE task 5 -->
    
    <h3>Registriere die Middleware beim Player</h3>
    <p>Finden Sie den Code, der mit der Bezeichnung versehen ist:</p>
    <pre>
<code class="language-javascript" translate="No">// +++ Register the middleware with the player +++</code></pre>
    <p>Registrieren Sie die Middleware-Funktion mit der <code translate="No">use()</code> Methode beim Player.</p>
    <!-- UPDATE task 6 -->
    
    <h3>Definieren Sie die Optionen für die Wiedergaberate</h3>
    <p>Finden Sie den Code, der mit der Bezeichnung versehen ist:</p>
    <pre>
<code class="language-javascript" translate="No">// +++ Define the playback rate options +++</code></pre>
    <p>Definieren Sie die Wiedergaberaten, die in der Menüschaltfläche der Wiedergaberate angezeigt werden sollen.</p>
    <!-- UPDATE task 7 -->
    
    <h3>Initialisieren Sie die Wiedergaberate</h3>
    <p>Finden Sie den Code, der mit der Bezeichnung versehen ist:</p>
    <pre>
<code class="language-javascript" translate="No">// +++ Initialize the playback rate button +++</code></pre>
    <p>Fügen Sie der Player-Steuerleiste die Menüschaltfläche der Wiedergaberate hinzu und initialisieren Sie sie mit den im Optionsobjekt angegebenen Werten.</p>
  </section>
  <!-- UPDATE CSS description -->
  
  <section class="bcls-section">
    <h2 id="Application_styling">Styling der Anwendung</h2>
    <p>Es gibt keine zusätzlichen Stile für dieses Beispiel.</p>
  </section>
  <section class="bcls-section">
    <h2 id="Using_the_middleware_function">Verwenden der Middleware-Funktion</h2>
    <p>Sobald die Middleware-Funktion geschrieben wurde, möchten Sie sie verwenden. Zwei Wege wurden bereits erwähnt und werden jetzt detailliert beschrieben.</p>
    <h3>Code auf derselben Seite wie Spieler</h3>
    <p>Hier definieren Sie die Middleware-Funktion auf derselben Seite wie der Player und registrieren sie dann. Das <a href="#Player_example">Spielerbeispiel</a> im obigen Codepen verwendet diese Methode.</p>
    <h3 id="Code_in_a_separate_JavaScript_file">Code in einer separaten JavaScript-Datei</h3>
    <p>Im folgenden Code sind das JavaScript für die Middleware-Funktionen und die <code translate="No">use()</code> Methode zur Registrierung einfach auf der Seite enthalten.</p>
    <pre class="line-numbers">
<code class="language-html" translate="No">&lt;video-js id="myPlayerID"
	  data-video-id="5604123528001"
	  data-account="1752604059001"
	  data-player="default"
	  data-embed="default"
	  data-application-id
	  class="video-js"
	  width="640" height="360"
	  controls muted&gt;&lt;/video&gt;
	&lt;script src="https://players.brightcove.net/1752604059001/default_default/index.min.js"&gt;&lt;/script&gt;

  &lt;!-- Include the rate adjuster middleware functions --&gt;
  &lt;script src="rate-adjuster.js"&gt;&lt;/script&gt;

  &lt;script type="text/javascript"&gt;
  	videojs.getPlayer("myPlayerID").ready(function(){
  		// When the player is ready, get a reference to it
  		var myPlayer = this;
  		console.log("myPlayer",myPlayer)
  		// Define the playback rate options
  		options = {"playbackRates":[0.5, 1, 1.5, 2, 4]};
  		// Initialize the playback rate button
  		myPlayer.controlBar.playbackRateMenuButton = myPlayer.controlBar.addChild('PlaybackRateMenuButton', {
      	playbackRates: options.playbackRates
  	  });
    });
  &lt;/script&gt;</code></pre>
    <p>In diesem Beispiel wird davon ausgegangen, dass Sie die JavaScript-Datei auf Ihrem eigenen Server hosten. Den vollständigen Code finden Sie im Abschnitt <a href="https://github.com/BrightcoveLearning/18597-playback-rate-adjuster/tree/master/plugin">Plugin</a> im GitHub-Repo.</p>
    <aside class="bcls-aside bcls-aside--tip">
      <p>Die <strong></strong> videojs-playbackrate-justier-Middleware wird auf <strong>npm veröffentlicht</strong> und kann in Ihr Projekt aufgenommen werden: <a href="//unpkg.com/videojs-playbackrate-adjuster@1.0.0/dist/browser/videojs-playbackrate-adjuster.min.js">//unpkg.com/videojs-playbackrate-adjuster @1 .0.0/dist/browser/ videojs-playbackrate-adjuster.min.js</a></p>
      <p>Beachten Sie, dass die</strong> Website <strong>unpkg.com kostenlos und Open Source ist. Es garantiert keine Verfügbarkeit und Infrastrukturunterstützung.</p>
    </aside>
  </section>
</article>