---
title: 'Beispiel für Brightcove Spieler: Ad-Countdown-Timer'
description: 'In diesem Thema lernen Sie, wie Sie einen Countdown-Timer für eine Werbung erstellen. Das Display nutzt das Overlay-Plugin. Beachten Sie, dass dies im iOS-Vollbildmodus nicht funktioniert. Ausführliche Informationen finden Sie im <a href="/playback/ios-and-brightcove-player.html">iOS- und Brightcove</a> Player-Dokument.'
parent: Code Samples
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>
  <section class="bcls-section">
    <h2 id="Player_example">Beispiel eines Spielers</h2>
    <!-- UPDATE description -->
    
    <aside class="bcls-aside bcls-aside--information">Dieses Beispiel und der zugehörige Code werden als Leitfaden für Ihre Produktionsentwicklung bereitgestellt. Der Code ist weder für die Verwendung in der Produktion zertifiziert noch offiziell unterstützt.</aside>
    <p>Für den Preroll, Mid-Roll und Postroll erscheint oben links im Spieler ein Countdown-Timer für die Anzeige.</p>
    <!-- UPDATE codepen here -->
    
    <p class="codepen" data-height="468" data-theme-id="34967" data-default-tab="result" data-user="rcrooks1969" data-slug-hash="rzdXVQ" style="height: 468px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid; margin: 1em 0; padding: 1em;" data-pen-title="Ad Countdown Timer"><span>Sehen Sie sich den <a href="https://codepen.io/team/rcrooks1969/pen/rzdXVQ/"> Countdown-Timer für Pen</a> von Brightcove Learning Services (<a href="https://codepen.io/rcrooks1969">@rcrooks1969</a>) auf <a href="https://codepen.io">CodePen an</a>.</span></p>
    <script async src="https://static.codepen.io/assets/embed/ei.js"></script>
    
    <h3>Quellcode</h3>
          <p>Sehen Sie sich die <a href="https://github.com/BrightcoveLearning/18188-ad-countdown-timer">Komplettlösung auf GitHub an</a>.</p>
  </section>
  <section class="bcls-section">
    <details>
      <summary><h2 id="Using_the_CodePen">CodePen verwenden</h2></summary>
      <p>Hier sind einige Tipps zur effektiven Verwendung des obigen CodePen:</p>
      <ul>
        <li>Schalten Sie die aktuelle Anzeige des Players um, indem Sie auf klicken <strong translate="No">Ergebnis</strong> Taste.</li>
        <li>Drücke den <strong translate="No">HTML/CSS/JS</strong> Tasten, um EINEN der Codetypen anzuzeigen.</li>
        <li>Später in diesem Dokument werden die Logik, der Ablauf und das Styling der Anwendung in der <a href="#Player/HTML_configuration">Player/HTML-Konfiguration</a>, im <a href="#Application_flow">Anwendungsfluss</a> und im <a href="#Application_styling">Anwendungsstyling diskutiert</a> Abschnitte. Der beste Weg, um den Informationen in diesen Abschnitten zu folgen, besteht darin:
          <ol>
            <li>Drücke den <strong translate="No">AUF CODEPEN BEARBEITEN</strong> im CodePen und haben Sie den Code in einem Browser/Browser-Tab verfügbar.</li>
            <li>Passen Sie in CodePen an, welcher Code angezeigt werden soll. Sie können die Breite verschiedener CodeAbschnitte in CodePen ändern.</li>
            <li>Sieh den <a href="#Player/HTML_configuration">Player-/HTML-Konfiguration</a> , <a href="#Application_flow">Bewerbungsablauf</a> und/oder <a href="#Application_styling">Bewerbungsstyling</a> Abschnitte in einem anderen Browser/Browser-Tab. Sie können nun den Codeerklärungen folgen und gleichzeitig den Code anzeigen.</li>
          </ol>
        </li>
      </ul>
    </details>
  </section>
  <section class="bcls-section">
    <details>
      <summary><h2 id="Development_sequence">Entwicklungs-Sequenz</h2></summary> 
      <p>Hier ist die empfohlene Entwicklungssequenz:</p>
      <ol>
        <li>Verwenden Sie die In-Page-Embed-Player-Implementierung, um die Funktionalität Ihres Players, Plugins und CSS zu testen (falls CSS benötigt wird)</li>
        <li>Legen Sie JavaScript und CSS des Plugins in separate Dateien zum lokalen Testen</li>
        <li>Stellen Sie den Plugin-Code und das CSS auf Ihrem Server bereit, sobald Sie Fehler herausgefunden haben</li>
        <li>Benutze Studio, um das Plugin und das CSS deinem Player hinzuzufügen</li>
        <li>Ersetzen Sie die In-Page-Embed-Player-Implementierung, wenn Sie feststellen, dass die Iframe-Implementierung besser passt (im nächsten Abschnitt beschrieben)</li>
      </ol>
      <p>Weitere Informationen zu diesen Schritten finden Sie in der <a href="/coding-topics/step-step-plugin-development.html">Schritt-für-Schritt-Anleitung: </a> Leitfaden zur Entwicklung von Plugins</p>
      <h3>iframe oder In-Page einbetten</h3>
      <p>Bei der Entwicklung von Verbesserungen für den Brightcove Player müssen Sie entscheiden, ob der Code am besten für die Iframe- oder In-Page-Einbettungsimplementierung geeignet ist. Die Best Practice-Empfehlung besteht darin, ein Plugin zur Verwendung mit einer Iframe-Implementierung zu erstellen. Die Vorteile der Verwendung des iFrame-Players sind:</p>
      <ul>
        <li>Keine Kollisionen mit vorhandenem JavaScript und/oder CSS</li>
        <li>Reaktionsschnell</li>
        <li>Der iframe erleichtert die Verwendung in Social-Media-Apps (oder wann immer das Video in andere Apps „reisen“ muss)</li>
      </ul>
      <p>Obwohl die Integration des In-Page-Einbettungsplayers komplexer sein kann, planen Sie Ihren Code in dieser Implementierung manchmal. Um zu verallgemeinern, ist dieser Ansatz am besten, wenn die enthaltende Seite mit dem Spieler kommunizieren muss. Im Einzelnen sind hier einige Beispiele:</p>
      <ul>
        <li>Der Code auf der enthaltenden Seite muss Spielerereignisse abhören und darauf reagieren</li>
        <li>Der Player verwendet Stile von der enthaltenden Seite</li>
        <li>Der Iframe führt dazu, dass die App-Logik fehlschlägt, wie eine Weiterleitung von der enthaltenen Seite</li>
      </ul>
      <p>Selbst wenn Ihre endgültige Implementierung den Iframe-Code nicht verwendet, können Sie den In-Page-Einbettungscode trotzdem mit einem Plugin für Ihr JavaScript und einer separaten Datei für Ihr CSS verwenden. Dies kapselt Ihre Logik, sodass Sie sie problemlos in mehreren Spielern verwenden können.</p>
    </details>
  </section>
  <section class="bcls-section">
    <h2 id="API/Plugin_resources_used">Verwendete API/Plugin-Ressourcen</h2>
    <!-- UPDATE table, remove unneeded columns -->
    
    <table class="bcls-table">
      <thead class="bcls-table__head">
        <tr>
          <th>API-Methoden</th>
          <th>API-Ereignisse</th>
          <th>Brightcove Player-Plugins</th>
        </tr>
      </thead>
      <tbody class="bcls-table__body">
        <tr>
          <td><a translate="No" href="//github.com/videojs/videojs-contrib-ads">ima3.adPlayer.Duration ()</a></td>
          <td><a href="https://docs.brightcove.com/brightcove-player/current-release/Player.html#event:loadedmetadata__anchor">loadedmetadaten</a></td>
          <td><a href="/plugins/advertising-ima3-plugin.html">IMA3-Plugin</a></td>
        </tr>
        <tr>
          <td><a translate="No" href="//github.com/videojs/videojs-contrib-ads">ima3.adplayer.currentTime ()</a></td>
          <td><a href="/plugins/advertising-ima3-plugin.html#Events">ima3 gestartet</a></td>
          <td><a href="/plugins/display-overlay-plugin.html">Overlay-Plugin</a></td>
        </tr>
        <tr>
          <td><a translate="No" href="https://docs.brightcove.com/brightcove-player/current-release/EventTarget.html#on__anchor">am ()</a></td>
          <td><a href="/plugins/advertising-ima3-plugin.html#Events">ima3-abgeschlossen</a></td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>&nbsp;</td>
          <td><a href="/plugins/advertising-ima3-plugin.html#Events">ads-ads-übersprungen</a></td>
          <td>&nbsp;</td>
        </tr>
      </tbody>
    </table>
  </section>
  <!-- UPDATE player and HTML configuration -->
  
  <section class="bcls-section">
    <h2 id="Player/HTML_configuration">Player-/HTML-Konfiguration</h2>
    <p>Dieser Abschnitt beschreibt jede spezielle Konfiguration, die während der Spielererstellung erforderlich ist. Darüber hinaus werden andere HTML-Elemente beschrieben, die der Seite über den In-Page-Einbettungsplayer-Implementierungscode hinaus hinzugefügt werden müssen.</p>
    <h3>Player-Konfiguration</h3>
    <p>Das IMA3-Plugin wurde in Studio wie folgt konfiguriert:</p>
    <figure class="bcls-figure"><img class="bcls-image" alt="Configure IAM3 plugin" src="/assets/images/code-samples/ad-countdown-sample/configure-ima.png" /></figure>
    <aside class="bcls-aside bcls-aside--tip">
      <p><strong>Obwohl das Overlay-Plugin im Code konfiguriert ist</strong>, können Sie Studio auch verwenden, um dieselbe Aufgabe auszuführen:</p>
      <figure class="bcls-figure"><img class="bcls-image" alt="Configure Overlay plugin" src="/assets/images/code-samples/ad-countdown-sample/configure-overlay.png" /></figure>
      <p>Natürlich würden Sie dann den äquivalenten Code aus dem Beispiel entfernen.</p>
    </aside>
    <h3>Anderes HTML</h3>
    <p>Die JavaScript- und CSS-Dateien des Overlay-Plugins werden in die Seite importiert.</p>
  </section>
  <!-- UPDATE application flow -->
  
  <section class="bcls-section">
    <h2 id="Application_flow">Ablauf der Anwendung</h2>
    <p>Die grundlegende Logik hinter dieser Anwendung lautet:</p>
    <ul>
      <li>Das IMA3-Plugin ist in Studio konfiguriert.</li>
      <li>Das Overlay-Plugin wird aufgerufen und konfiguriert.</li>
      <li>Beim Anzeigenstart wird das Overlay angezeigt und jede Sekunde wird eine Funktion aufgerufen, die die verbleibende Zeit in das Overlay injiziert.</li>
      <li>Bei Anzeigenstopp oder Übersprungen der Anzeige ist das Overlay ausgeblendet und eine Bereinigung des Overlays erfolgt.</li>
    </ul>
    <!-- UPDATE task 1 -->
    
    <h3>Konvertieren Sie Zeiten in Sekunden ohne Dezimalzahlen</h3>
    <p>Finden Sie den Code, der mit der Bezeichnung versehen ist:</p>
    <pre>
<code class="language-javascript" translate="No">// ### +++ Helpful method to convert seconds +++ ###</code></pre>
    <p>Diese Hilfsfunktion benötigt die Zeiten, die Stunden, Minuten und Sekunden enthalten können, und konvertiert einfach in Sekunden.</p>
    <!-- UPDATE task 2 -->
    
    <h3>Richten Sie das Hören für Werbeveranstaltungen ein</h3>
    <p>Finden Sie den Code, der mit der Bezeichnung versehen ist:</p>
    <pre class="line-numbers">
<code class="language-javascript" translate="No">// +++ Start counter on start of ad +++</code></pre>
    UND
    <pre class="line-numbers">
<code class="language-javascript" translate="No">// +++ Listen for ad end or skipped +++</code></pre>
    <p>Nachdem die Anzeige- und Videoinformationen in den Player geladen wurden, wissen Sie, dass Sie darauf warten <code translate="No">loadedmetadata</code>, Sie verwenden die <code translate="No">on()</code> Methode, um zu hören <code translate="No">ima3-started</code> <code translate="No">ima3-complete</code> und <code translate="No">ads-ad-skipped</code>.</p>
    <!-- UPDATE task 3 -->
    
    <h3>Overlay beim Anzeigenstart anzeigen</h3>
    <p>Finden Sie den Code, der mit der Bezeichnung versehen ist:</p>
    <pre class="line-numbers">
<code class="language-javascript" translate="No">// +++ Start counter on start of ad +++</code></pre>
    <p>Dem Overlay wird eine Klasse zum Stylen hinzugefügt, das Overlay wird angezeigt, dann wird die <code translate="No">setInterval()</code> JavaScript-Methode verwendet, um die benutzerdefinierte <code translate="No">everySecond()</code> Methode aufzurufen. Bei der <code translate="No">everySecond()</code> Methode wird die aktuelle Zeit der Anzeigenwiedergabe von der Dauer und dem formatierten Ergebnis in das Overlay subtrahiert.</p>
    <!-- UPDATE task 3 -->
    
    <h3>Overlay bei abgeschlossener oder übersprungener Anzeige ausblenden</h3>
    <p>Finden Sie den Code, der mit der Bezeichnung versehen ist:</p>
    <pre class="line-numbers">
<code class="language-javascript" translate="No">// +++ Listen for ad end or skipped +++</code></pre>
    <p>Beide Anzeigenereignisse, die die Anzeige beenden könnten, rufen eine Funktion namens auf <code translate="No">videoCompleteOrSkipped</code>. In dieser Funktion muss eine Variable namens <code translate="No">theInterval</code> von den zuvor aufgerufenen erstellt werden <code translate="No">setInterval()</code>, von JavaScripts gelöscht werden <code translate="No">clearInterval()</code>- Methode. Dies wird benötigt, da die Verarbeitungszeit von der Intervallvariablen übernommen wird. Schließlich ist das Overlay ausgeblendet und jeder injizierte HTML-Code wird gelöscht.</p>
  </section>
  <!-- UPDATE CSS description -->
  
  <section class="bcls-section">
    <h2 id="Application_styling">Styling der Anwendung</h2>
    <p>Das CSS wird verwendet, um das Aussehen des Overlays zu gestalten, das den Countdown-Timer anzeigt.</p>
  </section>
  <section class="bcls-section">
    <h2 id="Plugin_code">Plugin-Code</h2>
    <p>Normalerweise sind bei der Umwandlung des JavaScript in ein Brightcove Player-Plugin nominelle Änderungen erforderlich. Eine erforderliche Änderung besteht darin, die Standardverwendung der <code translate="No">ready()</code> Methode durch den Code zu ersetzen, der ein Plugin definiert.</p>
    <p>Hier ist der sehr häufig verwendete Start zu JavaScript-Code, der mit dem Player funktioniert:</p>
    <pre class="line-numbers">
<code class="language-javascript" translate="No">videojs.getPlayer('myPlayerID').ready(function() {
  var myPlayer = this;
  ...
});</code></pre>
    <p>Sie ändern die erste Zeile, um die Standardsyntax zum Starten eines Brightcove Player-Plugins zu verwenden:</p>
    <pre class="line-numbers">
<code class="language-javascript" translate="No">videojs.registerPlugin('pluginName', function(options) {
  var myPlayer = this;
  ...
});</code></pre>
    <!-- UPDATE path to plugin's JavaScript -->
    
    <p>Wie bereits erwähnt, können Sie den JavaScript-Code des Plugins im entsprechenden GitHub-Repo dieses Dokuments sehen: <a href="//github.com/BrightcoveLearning/18188-ad-countdown-timer/blob/master/plugin/adCountdown.js">adCountdown.js</a>.</p>
    <h3>Verwenden des Plugins mit einem Player</h3>
    <p>Sobald Sie die CSS- und JavaScript-Dateien des Plugins an einem für das Internet zugänglichen Ort gespeichert haben, können Sie das Plugin mit einem Player verwenden. Im Studio <strong>SPIELER</strong> Modul können Sie einen Spieler wählen, dann in der <strong>PLUGINS</strong> fügen Sie die URLs zu den CSS- und JavaScript-Dateien hinzu und fügen Sie auch die <strong>Name</strong> und <strong>Optionen</strong> , wenn Optionen benötigt werden.</p>
    <aside class="bcls-aside bcls-aside--tip">Weitere Informationen zur Verwendung von Studio zum Zuweisen von Plugins zu Spielern finden Sie im Dokument <a href="https://studio.support.brightcove.com/players/configuring-player-plugins.html">Configuring Player Plugins</a>.</aside>
  </section>
</article>