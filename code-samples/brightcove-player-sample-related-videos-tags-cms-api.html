---
title: 'Beispiel für Brightcove Spieler: Verwandter Videos über Tags (CMS-API)'
description: In diesem Thema erfahren Sie, wie Sie Videos mit den gleichen Tags wie das aktuelle Video abrufen und in einem Overlay anzeigen. In diesem Beispiel wird die CMS-API zum Abrufen der Videos verwendet.
parent: Code Samples
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>
  <section class="bcls-section">
    <h2 id="introduction">Einleitung</h2>
    <p>In diesem Thema erfahren Sie, wie Sie Daten von der <a href="https://apis.support.brightcove.com/cms/">CMS-API abrufen</a> und in einem Overlay für den Brightcove Player anzeigen. Dieses Overlay zeigt eine Reihe verwandter Videos (über Tags/Metadaten) in Ihrem Konto an, wenn die Wiedergabe angehalten oder beendet wird. Siehe auch das</a> Beispiel „ <a href="/code-samples/brightcove-player-sample-popular-videos-overlay.html">Popular Videos Overlay“.</p>
    <aside class="bcls-aside bcls-aside--information">Der Inhalt in diesem Dokument gilt nur für Video Cloud.</aside>
  </section>
  <section class="bcls-section">
    <h2 id="limitations">Einschränkungen</h2>
    <aside class="bcls-aside bcls-aside--information">Dieses Beispiel und der zugehörige Code werden als Leitfaden für Ihre Produktionsentwicklung bereitgestellt. Der Code ist weder für die Verwendung in der Produktion zertifiziert noch offiziell unterstützt.</aside>
  </section>
  <section class="bcls-section">
    <h2 id="Player_example">Beispiel eines Spielers</h2>
    <!-- UPDATE description -->

    <p>In diesem Beispiel wird eine interaktive Überlagerung verwandter Videominiaturansichten angezeigt, wenn die Wiedergabe angehalten oder beendet wurde. Starten Sie die Wiedergabe für das Video unten. Wenn Sie die Wiedergabe pausieren oder wenn das Video endet, wird eine Überlagerung verwandter Videos angezeigt. Wenn Sie eine Miniaturansicht im Overlay auswählen, lädt das zugehörige Video im Player und startet die Wiedergabe.</p>
    <!-- UPDATE codepen here -->

    <p data-height="465" data-theme-id="34967" data-slug-hash="Mrxdwa" data-default-tab="result" data-user="bcls1969" data-embed-version="2" data-pen-title="18147-Related-Videos-via-Tags-CMS-API" class="codepen">Sehen Sie sich das Pen <a href="https://codepen.io/team/bcls1969/pen/Mrxdwa/">Brightcove Player Sample an: Verwandte Videos über Tags (CMS-API)</a> von Brightcove Learning Services (<a href="https://codepen.io/team/rcrooks1969">@bcls1969</a>) auf <a href="https://codepen.io">CodePen</a>.</p>
    <script async src="https://production-assets.codepen.io/assets/embed/ei.js"></script><!-- UPDATE link to GitHub source -->

    <h3>Quellcode</h3>
          <p>Sehen Sie sich die <a href="https://github.com/BrightcoveLearning/18147-Related-Videos-via-Tags-CMS-API">Komplettlösung auf GitHub an</a>.</p>
  </section>
  <section class="bcls-section">
    <h2 id="Overview">Überblick</h2>
    <p>In diesem Beispiel wird ein in PHP eingebauter <a href="/getting-started/learning-guide-using-rest-apis.html#Proxy_code">Proxy verwendet,</a> um die <span translate="No">CMS-API aufzurufen</span> und im selben Konto nach verwandten Videos zu suchen, die den gleichen Tag-Wert haben wie das im Player geladene Video.</p>
    <aside class="bcls-aside bcls-aside--information">Um Ihre eigene Version der Beispiel-App auf dieser Seite zu erstellen, müssen Sie Ihren eigenen Proxy erstellen und hosten. (Die von Brightcove Learning Services verwendeten Proxys akzeptieren nur Anfragen von Brightcove-Domains.) Sie können zwei Versionen unseres Proxy-Codes herunterladen:
      <ul>
        <li><a href="https://apis.support.brightcove.com/assets/downloads/bcls-proxy-for-distribution.php.zip">Dies ist eine allgemeine Version, die erwartet, dass Clientanmeldeinformationen mit der Anfrage übergeben werden</a></li>
        <li><a href="https://apis.support.brightcove.com/assets/downloads/doc-samples-proxy.php.zip">Mit dieser Version können Sie Ihre Client-Anmeldeinformationen im Proxy selbst in Zeilen 25-26 speichern (empfohlen)</a></li>
      </ul>
    </aside>
    <p>Wenn Sie noch nicht mit der CMS-API arbeiten, überprüfen Sie zunächst die folgenden Dokumente:</p>
    <ul>
      <li><a href="https://apis.support.brightcove.com/cms/">CMS-API-Überblick</a></li>
      <li><a href="https://apis.support.brightcove.com/cms/">CMS-API-Zielseite</a></li>
    </ul>
  </section>
  <section class="bcls-section">
    <details>
      <summary><h2 id="Using_the_CodePen">CodePen verwenden</h2></summary>
      <p>Hier sind einige Tipps zur effektiven Verwendung des obigen CodePen:</p>
      <ul>
        <li>Schalten Sie die tatsächliche Anzeige des Spielers um, indem Sie auf die</strong> Schaltfläche <strong translate="No">Ergebnis klicken.</li>
        <li>Klicken Sie auf die</strong> Schaltflächen <strong translate="No">HTML/CSS/JS, um EINEN der Codetypen anzuzeigen.</li>
        <li>Später in diesem Dokument werden die Logik, der Ablauf und das Styling der Anwendung in der <a href="#Player/HTML_configuration">Player/HTML-Konfiguration</a>, im <a href="#Application_flow">Anwendungsfluss</a> und im <a href="#Application_styling">Anwendungsstyling diskutiert</a> Abschnitte. Der beste Weg, um den Informationen in diesen Abschnitten zu folgen, besteht darin:
          <ol>
            <li>Klicken Sie im CodePen auf die</strong> Schaltfläche <strong translate="No">EDIT ON CODEPEN und halten Sie den Code in einem Browser-/Browser-Tab zur Verfügung.</li>
            <li>Passen Sie in CodePen an, welcher Code angezeigt werden soll. Sie können die Breite verschiedener CodeAbschnitte in CodePen ändern.</li>
            <li>Zeigen Sie die</a> Abschnitte <a href="#Player/HTML_configuration">Player/HTML-Konfiguration</a>, <a href="#Application_flow">Anwendungsfluss</a> und/oder <a href="#Application_styling">Anwendungs-Styling in einer anderen Browser-/Browser-Registerkarte an. Sie können nun den Codeerklärungen folgen und gleichzeitig den Code anzeigen.</li>
          </ol>
        </li>
      </ul>
    </details>
  </section>
  <section class="bcls-section">
    <details>
      <summary><h2 id="Development_sequence">Entwicklungs-Sequenz</h2></summary>
      <p>Hier ist die empfohlene Entwicklungssequenz:</p>
      <ol>
        <li>Verwenden Sie die In-Page-Embed-Player-Implementierung, um die Funktionalität Ihres Players, Plugins und CSS zu testen (falls CSS benötigt wird)</li>
        <li>Legen Sie JavaScript und CSS des Plugins in separate Dateien zum lokalen Testen</li>
        <li>Stellen Sie den Plugin-Code und das CSS auf Ihrem Server bereit, sobald Sie Fehler herausgefunden haben</li>
        <li>Benutze Studio, um das Plugin und das CSS deinem Player hinzuzufügen</li>
        <li>Ersetzen Sie die In-Page-Embed-Player-Implementierung, wenn Sie feststellen, dass die Iframe-Implementierung besser passt (im nächsten Abschnitt beschrieben)</li>
      </ol>
      <p>Weitere Informationen zu diesen Schritten finden Sie in der <a href="/coding-topics/step-step-plugin-development.html">Schritt-für-Schritt-Anleitung: </a> Leitfaden zur Entwicklung von Plugins</p>
      <h3>iframe oder In-Page einbetten</h3>
      <p>Bei der Entwicklung von Verbesserungen für den Brightcove Player müssen Sie entscheiden, ob der Code am besten für die Iframe- oder In-Page-Einbettungsimplementierung geeignet ist. Die Best Practice-Empfehlung besteht darin, ein Plugin zur Verwendung mit einer Iframe-Implementierung zu erstellen. Die Vorteile der Verwendung des iFrame-Players sind:</p>
      <ul>
        <li>Keine Kollisionen mit vorhandenem JavaScript und/oder CSS</li>
        <li>Reaktionsschnell</li>
        <li>Der iframe erleichtert die Verwendung in Social-Media-Apps (oder wann immer das Video in andere Apps „reisen“ muss)</li>
      </ul>
      <p>Obwohl die Integration des In-Page-Einbettungsplayers komplexer sein kann, planen Sie Ihren Code in dieser Implementierung manchmal. Um zu verallgemeinern, ist dieser Ansatz am besten, wenn die enthaltende Seite mit dem Spieler kommunizieren muss. Im Einzelnen sind hier einige Beispiele:</p>
      <ul>
        <li>Der Code auf der enthaltenden Seite muss Spielerereignisse abhören und darauf reagieren</li>
        <li>Der Player verwendet Stile von der enthaltenden Seite</li>
        <li>Der Iframe führt dazu, dass die App-Logik fehlschlägt, wie eine Weiterleitung von der enthaltenen Seite</li>
      </ul>
      <p>Selbst wenn Ihre endgültige Implementierung den Iframe-Code nicht verwendet, können Sie den In-Page-Einbettungscode trotzdem mit einem Plugin für Ihr JavaScript und einer separaten Datei für Ihr CSS verwenden. Dies kapselt Ihre Logik, sodass Sie sie problemlos in mehreren Spielern verwenden können.</p>
    </details>
  </section>
  <section class="bcls-section">
    <h2 id="API/Plugin_resources_used">Verwendete API/Plugin-Ressourcen</h2>
    <!-- UPDATE table, remove unneeded columns -->

    <table class="bcls-table">
      <thead class="bcls-table__head">
        <tr>
          <th>API-Methoden</th>
          <th>API-Ereignisse</th>
          <th>Plugins</th>
        </tr>
      </thead>
      <tbody class="bcls-table__body">
        <tr>
          <td><a href="/references/player-catalog.html#getVideo">catalog.getVideo ()</a></td>
          <td><a href="https://docs.brightcove.com/brightcove-player/current-release/Player.html#event:play">spielen</a></td>
          <td><a href="https://github.com/brightcove/videojs-overlay">Videojs-Overlay</a></td>
        </tr>
        <tr>
          <td><a href="/references/player-catalog.html#load">catalog.load ()</a></td>
          <td><a href="https://docs.brightcove.com/brightcove-player/current-release/Player.html#event:ended">endete</a></td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td><a href="https://docs.brightcove.com/brightcove-player/current-release/Player.html#play">spielen ()</a></td>
          <td>&nbsp;</td>
          <td>&nbsp;</td>
        </tr>
      </tbody>
    </table>
  </section>
  <!-- UPDATE player and HTML configuration -->

  <section class="bcls-section">
    <h2 id="Playe/plugins/display-overlay-plugin.html/plugins/display-overlay-plugin.htmlr/HTML_configuration">Player-/HTML-Konfiguration</h2>
    <p>Das <a href="/plugins/display-overlay-plugin.html">Overlay-Plugin</a> ist im JavaScript-Code für dieses Beispiel definiert und initialisiert. Der Grund, warum dies hier gemacht wird, ist, dass wir die Metadaten der verwandten Videos abrufen müssen, bevor wir das Overlay initialisieren.</p>
    <p>Wenn Sie das Overlay-Plugin in Ihre Player-Konfiguration aufnehmen möchten, können Sie die Overlay-JaVASCRIPT- und CSS-Dateien im Player-Modul von Video Cloud Studio hinzufügen. Lassen Sie im</strong> Abschnitt <a href="https://studio.support.brightcove.com/players/configuring-player-plugins.html"><strong></a> Plugins die <strong></strong> Name-Eigenschaft leer, damit Sie das Plugin innerhalb des Codes initialisieren können.</p>
    <h3>Anderes HTML</h3>
    <p>Denken Sie daran, das <code translate="No">id</code> Attribut dem <code translate="No">video</code> Tag im Einbettungscode des Spielers hinzuzufügen.</p>
    <pre>
    <code class="language-html" translate="No">&lt;video-js <span class="bcls-highlight">id="myPlayerID"</span>
    ...</code></pre>
  </section>
  <!-- UPDATE application flow -->

  <section class="bcls-section">
    <h2 id="Application_flow">Ablauf der Anwendung</h2>
    <p>Die grundlegende Logik hinter dieser Anwendung lautet:</p>
    <ul>
      <li>Erstellen Sie Variablen, die Werte für die <span translate="No"></span> Basis-CMS-API-URL und die Proxy-Code-URL definieren.</li>
      <li>Warten Sie, bis das Video geladen wird, um die Video-Metadaten abzurufen.</li>
      <li>Richten Sie die Anfrage für die CMS-API ein.</li>
      <li>Rufen Sie den Proxy-Code auf, um die Anfrage an die <span translate="No">CMS-API</span> zu stellen, um die ersten 9 verwandten Videos zu erhalten.</li>
      <li>Formatieren Sie den Overlay-Inhalt, um die Miniaturansichten für jedes der zugehörigen Videos anzuzeigen.</li>
      <li>Wenn ein Benutzer eine der zugehörigen Video-Miniaturansichten auswählt, laden Sie sie in den Player und starten Sie die Wiedergabe.</li>
    </ul>
    <!-- UPDATE task 1 -->

    <h3>Definieren Sie Werte</h3>
    <p>Erstellen Sie Variablen, die Werte für die <span translate="No"></span> Basis-CMS-API-URL und die Proxy-Code-URL definieren.</p>
    <!-- UPDATE task 2 -->

    <h3>Warte auf loadedmetadaten</h3>
    <p>Finden Sie den Code, der mit der Bezeichnung versehen ist:</p>
    <pre>
    <code class="language-javascript" translate="No">// +++ Wait for loadedmetadata +++</code></pre>
    <p>Warten Sie, bis das Video geladen wird, indem Sie auf das <code translate="No">loadedmetadata</code> Ereignis hören. Dies stellt sicher, dass die Video-Metadaten wie Konto-ID, Name und Tag-Werte im <code translate="No">mediainfo</code> Objekt verfügbar sind.</p>
    <!-- UPDATE task 3 -->

    <h3>Richten Sie die API-Anfrage</h3>
    <p>Finden Sie den Code, der mit der Bezeichnung versehen ist:</p>
    <pre>
    <code class="language-javascript" translate="No">// +++ Setup the API request +++</code></pre>
    <p>Erstellen Sie mithilfe der Informationen aus dem derzeit im Player geladenen Video eine <span translate="No"></span> CMS-API-Suchanfrage für Videos im selben Konto. Bei der Suche wird nach Videos gesucht, die den gleichen Wert wie das erste Tag im aktuellen Video haben. Es schließt jedes Video mit dem gleichen Namen wie das aktuelle Video aus und begrenzt die Anzahl der zurückgegebenen Videos auf 9. So viele passen in unser Overlay-Layout.</p>
    <!-- UPDATE task 4 -->

    <h3>Stellen Sie die <span translate="No"></span> CMS-API-Anfrage</h3>
    <p>Finden Sie den Code, der mit der Bezeichnung versehen ist:</p>
    <pre>
    <code class="language-javascript" translate="No">// +++ Make the <span translate="No">CMS API</span> request +++</code></pre>
    <p>Verwenden Sie den Proxy-Code, um eine HTTP GET-Anfrage an den</span> RESTful-Webdienst der <span translate="No">CMS-API zu senden. Analysieren Sie die zurückgegebenen Daten in das JSON-Format. Wenn ein Fehler auftritt, zeigen Sie eine Fehlermeldung an.</p>
    <!-- UPDATE task 5 -->

    <h3>Formatieren Sie den Overlay-Inhalt</h3>
    <p>Finden Sie den Code, der mit der Bezeichnung versehen ist:</p>
    <pre>
    <code class="language-javascript" translate="No">// +++ Format the overlay content +++</code></pre>
    <p>Um den Overlay-Inhalt zu formatieren, gehen Sie wie folgt vor:</p>
    <ul>
      <li>Extrahieren Sie die ID, den Namen und die Miniaturansicht für jedes verwandte Video, das von der CMS-API zurückgegeben wird, und speichern Sie es in einem Array.</li>
      <li>Erstellen Sie durch das zugehörige Video-Array einen <code translate="No">&lt;div&gt;</code> Videolisten-Wrapper, der ein <code translate="No">&lt;div&gt;</code> Element für jedes verwandte Video enthält. Dies wird zum Overlay-Inhalt.</li>
      <li>Initialisieren Sie das Overlay-Plugin mit den neu erstellten Inhalten für verwandte Videos. Sie sehen ein Raster mit verwandten Video-Miniaturansichten, wenn das Overlay angezeigt wird. Zeigen Sie das Overlay an, wenn die Videowiedergabe angehalten oder beendet wurde. Blenden Sie das Overlay aus, wenn das Hauptvideo abgespielt wird.</li>
    </ul>
    <!-- UPDATE task 4 -->

    <h3>Verwandtes Video laden und abspielen</h3>
    <p>Finden Sie den Code, der mit der Bezeichnung versehen ist:</p>
    <pre>
    <code class="language-javascript" translate="No">// +++ Load and play related video +++</code></pre>
    <p>Erstellen Sie eine Funktion, die die Wiedergabe für das zugehörige Video lädt und startet, das vom Benutzer ausgewählt wird.</p>
  </section>
  <!-- UPDATE CSS description -->

  <section class="bcls-section">
    <h2 id="Application_styling">Styling der Anwendung</h2>
    <p>Das CSS formatiert das Miniaturraster für verwandte Videos für das Overlay.</p>
  </section>
  <section class="bcls-section">
    <h2 id="Plugin_code">Plugin-Code</h2>
    <p>Normalerweise sind bei der Umwandlung des JavaScript in ein Brightcove Player-Plugin nominelle Änderungen erforderlich. Eine erforderliche Änderung besteht darin, die Standardverwendung der <code translate="No">ready()</code> Methode durch den Code zu ersetzen, der ein Plugin definiert.</p>
    <p>Hier ist der sehr häufig verwendete Start zu JavaScript-Code, der mit dem Player funktioniert:</p>
    <pre class="line-numbers">
    <code class="language-javascript" translate="No">videojs.getPlayer('myPlayerID').ready(function() {
      var myPlayer = this;
      ...
    });</code></pre>
    <p>Sie ändern die erste Zeile, um die Standardsyntax zum Starten eines Brightcove Player-Plugins zu verwenden:</p>
    <pre class="line-numbers">
    <code class="language-javascript" translate="No">videojs.registerPlugin('pluginName', function(options) {
      var myPlayer = this;
      ...
    });</code></pre>
    <!-- UPDATE path to plugin's JavaScript -->

    <p>Wie bereits erwähnt, können Sie den JavaScript-Code des Plugins im entsprechenden GitHub Repo dieses Dokuments sehen: <a href="https://github.com/BrightcoveLearning/18147-Related-Videos-via-Tags-CMS-API/blob/master/plugin/related-videos-cms.js">related-videos-cms.js</a>.</p>
    <h3>Verwenden des Plugins mit einem Player</h3>
    <p>Sobald Sie die CSS- und JavaScript-Dateien des Plugins an einem für das Internet zugänglichen Ort gespeichert haben, können Sie das Plugin mit einem Player verwenden. Im</strong> PLAYER-Modul von <strong>Studio können Sie einen Player auswählen, dann im</strong> Abschnitt <strong>PLUGINS die URLs zu den CSS- und JavaScript-Dateien hinzufügen und auch den <strong>Namen hinzufügen</strong> und <strong>Optionen</strong>, wenn Optionen benötigt werden.</p>
    <aside class="bcls-aside bcls-aside--tip">Weitere Informationen zur Verwendung von Studio zum Zuweisen von Plugins zu Spielern finden Sie im</a> Dokument <a href="https://studio.support.brightcove.com/players/configuring-player-plugins.html">Configuring Player Plugins.</aside>
  </section>
  <section class="bcls-section">
    <h2 id="proxy">Proxy-Code</h2>
    <p>Um Ihre eigene Version der Beispiel-App auf dieser Seite zu erstellen, müssen Sie Ihren eigenen Proxy erstellen und hosten. (Die von Brightcove Learning Services verwendeten Proxys akzeptieren nur Anfragen von Brightcove-Domains.) Ein Beispielproxy, der dem von uns verwendeten sehr ähnlich ist, aber ohne die Prüfungen, die Anfragen von Nicht-BrightCove-Domänen blockieren, kann in <a href="https://github.com/BrightcoveLearning/sample-proxy-apps">diesem GitHub-Repository gefunden werden</a>. Dort finden Sie auch grundlegende Anweisungen zur Verwendung und eine ausführlichere Anleitung zum Erstellen von Apps rund um den Proxy <a href="/getting-started/learning-guide-using-rest-apis.html">unter Verwenden der REST-APIs</a>.</p>
  </section>
</article>